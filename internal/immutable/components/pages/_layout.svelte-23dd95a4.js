var Wi=Object.defineProperty;var Gi=(rt,P,wt)=>P in rt?Wi(rt,P,{enumerable:!0,configurable:!0,writable:!0,value:wt}):rt[P]=wt;var p=(rt,P,wt)=>(Gi(rt,typeof P!="symbol"?P+"":P,wt),wt);import{_ as Ji}from"../../chunks/preload-helper-41c905a7.js";import{S as ge,i as me,s as le,d as yt,G as en,H as sn,v as ye,I as rn,n as g,c as _,x as T,p as m,q as b,l as y,f as x,y as N,r as i,J as ue,w as v,g as de,K as l,L as nn,M as an,z as Xi,N as Xt,O as Qi,u as on,A as ls,B as us,C as ds,k as Tt,t as Lt,D as hs,b as Yi,P as to,F as eo,Q as so,e as cn,j as ln,R as un,o as dn,E as hn,T as ro,h as pn,U as no,V as ao,W as io}from"../../chunks/index-23d2e92a.js";import{s as Nt,f as ve,c as we,u as re,H as Qt,m as oo,R as co,_ as fn,g as lo,$ as ps,q as fs,h as Yt,U as gs,V as ms,p as vt,a as gn,b as ys,d as ne,w as vs,E as uo,e as ho,i as po,j as fo,r as go,S as mo,k as ws,l as bs,A as yo,n as vo,o as mn,K as wo,t as bo,v as be,x as So,y as Ss,z as Se,B as ks,C as ko,D as yn,F as Io,G as vn,I as wn,J as Is,L as Eo,M as Es,N as $o,O as bn,P as Ao,Q as $s,T as As,X as Os,W as Sn}from"../../chunks/sbtc-9207746d.js";let kn,Oo=(async()=>{const rt=""+new URL("../../assets/logo-white-68f65e57.jpeg",import.meta.url).href,P="src/lib/header/Header.svelte";function wt(t){let e,s,r,n,a,o,c,d,w,f,u,$,S,A,h=t[0].network+"",k,O,E,C,M,q,Z,R,B,L,z,F;const et={c:function(){e=g("nav"),s=g("div"),r=g("a"),n=g("img"),o=_(),c=g("button"),d=g("span"),w=_(),f=g("div"),u=g("ul"),$=g("li"),S=g("span"),A=T("Network: "),k=T(h),O=_(),E=g("ul"),C=g("li"),M=g("a"),q=T("Testnet"),Z=_(),R=g("li"),B=g("a"),L=T("Mainnet"),this.h()},l:function(J){e=m(J,"NAV",{class:!0});var K=b(e);s=m(K,"DIV",{class:!0});var U=b(s);r=m(U,"A",{class:!0,href:!0});var It=b(r);n=m(It,"IMG",{class:!0,src:!0,alt:!0}),It.forEach(y),o=x(U),c=m(U,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0,"aria-expanded":!0,"aria-label":!0});var Et=b(c);d=m(Et,"SPAN",{class:!0}),b(d).forEach(y),Et.forEach(y),w=x(U),f=m(U,"DIV",{class:!0,id:!0});var D=b(f);u=m(D,"UL",{class:!0});var W=b(u);$=m(W,"LI",{class:!0});var st=b($);S=m(st,"SPAN",{class:!0,id:!0,role:!0,"data-bs-toggle":!0,"aria-expanded":!0});var nt=b(S);A=N(nt,"Network: "),k=N(nt,h),nt.forEach(y),O=x(st),E=m(st,"UL",{class:!0,"aria-labelledby":!0});var G=b(E);C=m(G,"LI",{});var V=b(C);M=m(V,"A",{class:!0,href:!0});var ee=b(M);q=N(ee,"Testnet"),ee.forEach(y),V.forEach(y),Z=x(G),R=m(G,"LI",{});var se=b(R);B=m(se,"A",{class:!0,href:!0});var at=b(B);L=N(at,"Mainnet"),at.forEach(y),se.forEach(y),G.forEach(y),st.forEach(y),W.forEach(y),D.forEach(y),U.forEach(y),K.forEach(y),this.h()},h:function(){i(n,"class","nav-logo"),ue(n.src,a=rt)||i(n,"src",a),i(n,"alt","CityCoins Test"),v(n,P,23,3,909),i(r,"class","navbar-brand"),i(r,"href","/"),v(r,P,22,4,872),i(d,"class","navbar-toggler-icon"),v(d,P,26,3,1162),i(c,"class","navbar-toggler"),i(c,"type","button"),i(c,"data-bs-toggle","collapse"),i(c,"data-bs-target","#navbarNav"),i(c,"aria-controls","navbarNav"),i(c,"aria-expanded","false"),i(c,"aria-label","Toggle navigation"),v(c,P,25,2,980),i(S,"class","nav-link dropdown-toggle text-white"),i(S,"id","navbarDropdown"),i(S,"role","button"),i(S,"data-bs-toggle","dropdown"),i(S,"aria-expanded","false"),v(S,P,31,5,1339),i(M,"class","dropdown-item"),i(M,"href","/"),v(M,P,35,11,1618),v(C,P,35,7,1614),i(B,"class","dropdown-item"),i(B,"href","/"),v(B,P,36,11,1737),v(R,P,36,7,1733),i(E,"class","dropdown-menu dropdown-menu-start"),i(E,"aria-labelledby","navbarDropdown"),v(E,P,34,5,1527),i($,"class","nav-item dropdown"),v($,P,30,4,1303),i(u,"class","navbar-nav"),v(u,P,29,3,1275),i(f,"class","collapse navbar-collapse"),i(f,"id","navbarNav"),v(f,P,28,2,1218),i(s,"class","container-fluid mx-5"),v(s,P,21,1,833),i(e,"class","navbar navbar-expand-md transparent"),v(e,P,20,0,782)},m:function(J,K){de(J,e,K),l(e,s),l(s,r),l(r,n),l(s,o),l(s,c),l(c,d),l(s,w),l(s,f),l(f,u),l(u,$),l($,S),l(S,A),l(S,k),l($,O),l($,E),l(E,C),l(C,M),l(M,q),l(E,Z),l(E,R),l(R,B),l(B,L),z||(F=[nn(M,"click",an(t[2]),!1,!0,!1),nn(B,"click",an(t[3]),!1,!0,!1)],z=!0)},p:function(J,[K]){K&1&&h!==(h=J[0].network+"")&&Xi(k,h)},i:Xt,o:Xt,d:function(J){J&&y(e),z=!1,Qi(F)}};return yt("SvelteRegisterBlock",{block:et,id:wt.name,type:"component",source:"",ctx:t}),et}function In(t,e,s){let r;en(Nt,"sbtcConfig"),sn(t,Nt,u=>s(0,r=u));let{$$slots:n={},$$scope:a}=e;ye("Header",n,[]);const o=rn(),c=async u=>{if(u===r.network)return;const $=await ve(u);let S={network:u,sbtcWalletAddress:$};Nt.update(()=>S),o("network_change",{})},d=[];Object.keys(e).forEach(u=>{!~d.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Header> was created with unknown prop '${u}'`)});const w=()=>c("testnet"),f=()=>c("mainnet");return t.$capture_state=()=>({logoWhite:rt,sbtcConfig:Nt,fetchSbtcWalletAddress:ve,createEventDispatcher:rn,dispatch:o,updateNetwork:c,$sbtcConfig:r}),[r,c,w,f]}class _s extends ge{constructor(e){super(e),me(this,e,In,wt,le,{}),yt("SvelteRegisterComponent",{component:this,tagName:"Header",options:e,id:wt.name})}}const xs=""+new URL("../../assets/stx_eco_discord-5cc61295.png",import.meta.url).href,Ts=""+new URL("../../assets/stx_eco_twitter-b58c754c.png",import.meta.url).href,Ns=""+new URL("../../assets/stx_eco_github-0e15c254.png",import.meta.url).href,I="src/lib/header/FooterLinks.svelte";function ke(t){let e,s,r,n,a,o,c,d,w,f,u,$,S,A,h,k,O,E,C,M,q,Z,R,B,L,z,F,et,J,K,U,It,Et,D,W,st,nt,G,V,ee,se,at,it,je,Be,jt,ot,ze,Ve,Q,Bt,He,qe,zt,ct,Ze,We,Vt,lt,Ge,Je,Ht,ut,Xe,Qe,Y,qt,Ye,ts,Zt,dt,es,ss,Wt,ht,rs,ns,Gt,pt,as,is,Jt,$t,At,ft,Ot,dr,os,gt,_t,hr,cs,Pt,mt,xt,pr;const fr={c:function(){e=g("div"),s=g("div"),r=g("p"),n=T("Standards"),a=_(),o=g("div"),c=g("a"),d=T("SIP Process"),w=_(),f=g("div"),u=g("a"),$=T("SIP Requests"),S=_(),A=g("div"),h=g("a"),k=T("SIP News"),O=_(),E=g("div"),C=g("p"),M=T("Code"),q=_(),Z=g("div"),R=g("a"),B=T("Clarity Lab"),L=_(),z=g("div"),F=g("a"),et=T("Raise Issues"),J=_(),K=g("div"),U=g("a"),It=T("Ecosystem DAO"),Et=_(),D=g("div"),W=g("p"),st=T("Videos"),nt=_(),G=g("div"),V=g("a"),ee=T("Stacks"),se=_(),at=g("div"),it=g("a"),je=T("Clarity"),Be=_(),jt=g("div"),ot=g("a"),ze=T("PoX"),Ve=_(),Q=g("div"),Bt=g("p"),He=T("Contact"),qe=_(),zt=g("div"),ct=g("a"),Ze=T("Discord"),We=_(),Vt=g("div"),lt=g("a"),Ge=T("Enquiries"),Je=_(),Ht=g("div"),ut=g("a"),Xe=T("Twitter"),Qe=_(),Y=g("div"),qt=g("p"),Ye=T("Partners"),ts=_(),Zt=g("div"),dt=g("a"),es=T("Foundation"),ss=_(),Wt=g("div"),ht=g("a"),rs=T("Hiro Wallet"),ns=_(),Gt=g("div"),pt=g("a"),as=T("Trust Machines"),is=_(),Jt=g("div"),$t=g("div"),At=g("div"),ft=g("a"),Ot=g("img"),os=_(),gt=g("a"),_t=g("img"),cs=_(),Pt=g("div"),mt=g("a"),xt=g("img"),this.h()},l:function(ce){e=m(ce,"DIV",{class:!0});var X=b(e);s=m(X,"DIV",{class:!0});var Rt=b(s);r=m(Rt,"P",{class:!0});var gr=b(r);n=N(gr,"Standards"),gr.forEach(y),a=x(Rt),o=m(Rt,"DIV",{class:!0});var mr=b(o);c=m(mr,"A",{href:!0,target:!0,rel:!0,class:!0});var yr=b(c);d=N(yr,"SIP Process"),yr.forEach(y),mr.forEach(y),w=x(Rt),f=m(Rt,"DIV",{class:!0});var vr=b(f);u=m(vr,"A",{href:!0,target:!0,rel:!0,class:!0});var wr=b(u);$=N(wr,"SIP Requests"),wr.forEach(y),vr.forEach(y),S=x(Rt),A=m(Rt,"DIV",{class:!0});var br=b(A);h=m(br,"A",{href:!0,target:!0,rel:!0,class:!0});var Sr=b(h);k=N(Sr,"SIP News"),Sr.forEach(y),br.forEach(y),Rt.forEach(y),O=x(X),E=m(X,"DIV",{class:!0});var Mt=b(E);C=m(Mt,"P",{class:!0});var kr=b(C);M=N(kr,"Code"),kr.forEach(y),q=x(Mt),Z=m(Mt,"DIV",{class:!0});var Ir=b(Z);R=m(Ir,"A",{href:!0,target:!0,rel:!0,class:!0});var Er=b(R);B=N(Er,"Clarity Lab"),Er.forEach(y),Ir.forEach(y),L=x(Mt),z=m(Mt,"DIV",{class:!0});var $r=b(z);F=m($r,"A",{href:!0,target:!0,rel:!0,class:!0});var Ar=b(F);et=N(Ar,"Raise Issues"),Ar.forEach(y),$r.forEach(y),J=x(Mt),K=m(Mt,"DIV",{class:!0});var Or=b(K);U=m(Or,"A",{href:!0,target:!0,rel:!0,class:!0});var _r=b(U);It=N(_r,"Ecosystem DAO"),_r.forEach(y),Or.forEach(y),Mt.forEach(y),Et=x(X),D=m(X,"DIV",{class:!0});var Ut=b(D);W=m(Ut,"P",{class:!0});var xr=b(W);st=N(xr,"Videos"),xr.forEach(y),nt=x(Ut),G=m(Ut,"DIV",{class:!0});var Tr=b(G);V=m(Tr,"A",{target:!0,href:!0,rel:!0,class:!0});var Nr=b(V);ee=N(Nr,"Stacks"),Nr.forEach(y),Tr.forEach(y),se=x(Ut),at=m(Ut,"DIV",{class:!0});var Cr=b(at);it=m(Cr,"A",{target:!0,href:!0,rel:!0,class:!0});var Pr=b(it);je=N(Pr,"Clarity"),Pr.forEach(y),Cr.forEach(y),Be=x(Ut),jt=m(Ut,"DIV",{class:!0});var Rr=b(jt);ot=m(Rr,"A",{target:!0,href:!0,rel:!0,class:!0});var Mr=b(ot);ze=N(Mr,"PoX"),Mr.forEach(y),Rr.forEach(y),Ut.forEach(y),Ve=x(X),Q=m(X,"DIV",{class:!0});var Dt=b(Q);Bt=m(Dt,"P",{class:!0});var Ur=b(Bt);He=N(Ur,"Contact"),Ur.forEach(y),qe=x(Dt),zt=m(Dt,"DIV",{class:!0});var Dr=b(zt);ct=m(Dr,"A",{href:!0,target:!0,rel:!0,class:!0});var Fr=b(ct);Ze=N(Fr,"Discord"),Fr.forEach(y),Dr.forEach(y),We=x(Dt),Vt=m(Dt,"DIV",{class:!0});var Lr=b(Vt);lt=m(Lr,"A",{href:!0,target:!0,rel:!0,class:!0});var Kr=b(lt);Ge=N(Kr,"Enquiries"),Kr.forEach(y),Lr.forEach(y),Je=x(Dt),Ht=m(Dt,"DIV",{class:!0});var jr=b(Ht);ut=m(jr,"A",{href:!0,target:!0,rel:!0,class:!0});var Br=b(ut);Xe=N(Br,"Twitter"),Br.forEach(y),jr.forEach(y),Dt.forEach(y),Qe=x(X),Y=m(X,"DIV",{class:!0});var Ft=b(Y);qt=m(Ft,"P",{class:!0});var zr=b(qt);Ye=N(zr,"Partners"),zr.forEach(y),ts=x(Ft),Zt=m(Ft,"DIV",{class:!0});var Vr=b(Zt);dt=m(Vr,"A",{class:!0,href:!0,target:!0,rel:!0});var Hr=b(dt);es=N(Hr,"Foundation"),Hr.forEach(y),Vr.forEach(y),ss=x(Ft),Wt=m(Ft,"DIV",{class:!0});var qr=b(Wt);ht=m(qr,"A",{class:!0,href:!0,target:!0,rel:!0});var Zr=b(ht);rs=N(Zr,"Hiro Wallet"),Zr.forEach(y),qr.forEach(y),ns=x(Ft),Gt=m(Ft,"DIV",{class:!0});var Wr=b(Gt);pt=m(Wr,"A",{class:!0,href:!0,target:!0,rel:!0});var Gr=b(pt);as=N(Gr,"Trust Machines"),Gr.forEach(y),Wr.forEach(y),Ft.forEach(y),is=x(X),Jt=m(X,"DIV",{class:!0});var Jr=b(Jt);$t=m(Jr,"DIV",{class:!0});var pe=b($t);At=m(pe,"DIV",{class:!0});var fe=b(At);ft=m(fe,"A",{class:!0,href:!0,target:!0,rel:!0});var Xr=b(ft);Ot=m(Xr,"IMG",{src:!0,alt:!0,width:!0,height:!0}),Xr.forEach(y),os=x(fe),gt=m(fe,"A",{class:!0,href:!0,target:!0,rel:!0});var Qr=b(gt);_t=m(Qr,"IMG",{src:!0,alt:!0,width:!0,height:!0}),Qr.forEach(y),fe.forEach(y),cs=x(pe),Pt=m(pe,"DIV",{style:!0});var Yr=b(Pt);mt=m(Yr,"A",{class:!0,href:!0,target:!0,rel:!0});var tn=b(mt);xt=m(tn,"IMG",{src:!0,alt:!0,width:!0,height:!0}),tn.forEach(y),Yr.forEach(y),pe.forEach(y),Jr.forEach(y),X.forEach(y),this.h()},h:function(){i(r,"class","s-OMmj-e4ZMm3Z"),v(r,I,9,4,414),i(c,"href","https://github.com/stacksgov/sips/blob/main/sips/sip-000/sip-000-stacks-improvement-proposal-process.md"),i(c,"target","_blank"),i(c,"rel","noreferrer"),i(c,"class","s-OMmj-e4ZMm3Z"),v(c,I,11,6,464),i(o,"class","demo-div"),v(o,I,10,4,435),i(u,"href","https://github.com/stacksgov/sips/pulls"),i(u,"target","_blank"),i(u,"rel","noreferrer"),i(u,"class","s-OMmj-e4ZMm3Z"),v(u,I,14,6,671),i(f,"class","demo-div"),v(f,I,13,4,642),i(h,"href","https://discord.com/channels/621759717756370964/1001471092302544936"),i(h,"target","_blank"),i(h,"rel","noreferrer"),i(h,"class","s-OMmj-e4ZMm3Z"),v(h,I,17,6,815),i(A,"class","demo-div"),v(A,I,16,4,786),i(s,"class","col-md-2 col-sm-6 hideme"),v(s,I,8,2,371),i(C,"class","s-OMmj-e4ZMm3Z"),v(C,I,21,4,1004),i(R,"href","https://github.com/Clarity-Innovation-Lab"),i(R,"target","_blank"),i(R,"rel","noreferrer"),i(R,"class","s-OMmj-e4ZMm3Z"),v(R,I,23,6,1049),i(Z,"class","demo-div"),v(Z,I,22,4,1020),i(F,"href","https://github.com/Clarity-Innovation-Lab/ecosystem-dao/issues"),i(F,"target","_blank"),i(F,"rel","noreferrer"),i(F,"class","s-OMmj-e4ZMm3Z"),v(F,I,26,6,1194),i(z,"class","demo-div"),v(z,I,25,4,1165),i(U,"href","https://github.com/Clarity-Innovation-Lab/ecosystem-dao"),i(U,"target","_blank"),i(U,"rel","noreferrer"),i(U,"class","s-OMmj-e4ZMm3Z"),v(U,I,29,6,1361),i(K,"class","demo-div"),v(K,I,28,4,1332),i(E,"class","col-md-2 col-sm-6 hideme"),v(E,I,20,2,961),i(W,"class","s-OMmj-e4ZMm3Z"),v(W,I,33,4,1543),i(V,"target","_blank"),i(V,"href","https://www.youtube.com/watch?v=fbq6L3PrKWE"),i(V,"rel","noreferrer"),i(V,"class","s-OMmj-e4ZMm3Z"),v(V,I,35,6,1590),i(G,"class","demo-div"),v(G,I,34,4,1561),i(it,"target","_blank"),i(it,"href","https://www.youtube.com/watch?v=OAVwd6SNJVU&t=717s"),i(it,"rel","noreferrer"),i(it,"class","s-OMmj-e4ZMm3Z"),v(it,I,38,6,1732),i(at,"class","demo-div"),v(at,I,37,4,1703),i(ot,"target","_blank"),i(ot,"href","https://www.youtube.com/watch?v=NG081fD-PoI"),i(ot,"rel","noreferrer"),i(ot,"class","s-OMmj-e4ZMm3Z"),v(ot,I,41,6,1882),i(jt,"class","demo-div"),v(jt,I,40,4,1853),i(D,"class","col-md-2 col-sm-6 hideme"),v(D,I,32,2,1500),i(Bt,"class","s-OMmj-e4ZMm3Z"),v(Bt,I,45,4,2042),i(ct,"href","https://discord.com/channels/621759717756370964/971037457661444156"),i(ct,"target","_blank"),i(ct,"rel","noreferrer"),i(ct,"class","s-OMmj-e4ZMm3Z"),v(ct,I,47,6,2090),i(zt,"class","demo-div"),v(zt,I,46,4,2061),i(lt,"href","mailto:mike@claritylab.dev"),i(lt,"target","_blank"),i(lt,"rel","noreferrer"),i(lt,"class","s-OMmj-e4ZMm3Z"),v(lt,I,50,6,2256),i(Vt,"class","demo-div"),v(Vt,I,49,4,2227),i(ut,"href","https://mobile.twitter.com/radicleart"),i(ut,"target","_blank"),i(ut,"rel","noreferrer"),i(ut,"class","s-OMmj-e4ZMm3Z"),v(ut,I,53,6,2384),i(Ht,"class","demo-div"),v(Ht,I,52,4,2355),i(Q,"class","col-md-2 col-sm-6 hideme"),v(Q,I,44,2,1999),i(qt,"class","s-OMmj-e4ZMm3Z"),v(qt,I,57,4,2542),i(dt,"class"," s-OMmj-e4ZMm3Z"),i(dt,"href",t[1]),i(dt,"target","_blank"),i(dt,"rel","noreferrer"),v(dt,I,59,6,2591),i(Zt,"class","demo-div"),v(Zt,I,58,4,2562),i(ht,"class"," s-OMmj-e4ZMm3Z"),i(ht,"href",t[0]),i(ht,"target","_blank"),i(ht,"rel","noreferrer"),v(ht,I,62,6,2712),i(Wt,"class","demo-div"),v(Wt,I,61,4,2683),i(pt,"class"," s-OMmj-e4ZMm3Z"),i(pt,"href","https://www.trustmachines.co/"),i(pt,"target","_blank"),i(pt,"rel","noreferrer"),v(pt,I,65,6,2838),i(Gt,"class","demo-div"),v(Gt,I,64,4,2809),i(Y,"class","col-md-2 col-sm-6 hideme"),v(Y,I,56,2,2499),ue(Ot.src,dr=xs)||i(Ot,"src",dr),i(Ot,"alt","discord ecosystem dao logo"),i(Ot,"width","39"),i(Ot,"height","auto"),v(Ot,I,71,131,3181),i(ft,"class","mx-0 s-OMmj-e4ZMm3Z"),i(ft,"href","https://discord.com/channels/621759717756370964/971037457661444156"),i(ft,"target","_blank"),i(ft,"rel","noreferrer"),v(ft,I,71,8,3058),ue(_t.src,hr=Ts)||i(_t,"src",hr),i(_t,"alt","twitter ecosystem dao logo"),i(_t,"width","39"),i(_t,"height","auto"),v(_t,I,72,102,3374),i(gt,"class","mx-0 s-OMmj-e4ZMm3Z"),i(gt,"href","https://mobile.twitter.com/radicleart"),i(gt,"target","_blank"),i(gt,"rel","noreferrer"),v(gt,I,72,8,3280),i(At,"class","mb-0"),v(At,I,70,6,3031),ue(xt.src,pr=Ns)||i(xt,"src",pr),i(xt,"alt","github ecosystem dao logo"),i(xt,"width","39"),i(xt,"height","auto"),v(xt,I,74,158,3636),i(mt,"class"," s-OMmj-e4ZMm3Z"),i(mt,"href","https://github.com/Clarity-Innovation-Lab/ecosystem-dao"),i(mt,"target","_blank"),i(mt,"rel","noreferrer"),v(mt,I,74,50,3528),on(Pt,"position","relative"),on(Pt,"left","2px"),v(Pt,I,74,6,3484),i($t,"class","text-center"),v($t,I,69,4,2999),i(Jt,"class","col-md-2 col-sm-12 "),v(Jt,I,68,2,2961),i(e,"class","row"),v(e,I,7,0,351)},m:function(ce,X){de(ce,e,X),l(e,s),l(s,r),l(r,n),l(s,a),l(s,o),l(o,c),l(c,d),l(s,w),l(s,f),l(f,u),l(u,$),l(s,S),l(s,A),l(A,h),l(h,k),l(e,O),l(e,E),l(E,C),l(C,M),l(E,q),l(E,Z),l(Z,R),l(R,B),l(E,L),l(E,z),l(z,F),l(F,et),l(E,J),l(E,K),l(K,U),l(U,It),l(e,Et),l(e,D),l(D,W),l(W,st),l(D,nt),l(D,G),l(G,V),l(V,ee),l(D,se),l(D,at),l(at,it),l(it,je),l(D,Be),l(D,jt),l(jt,ot),l(ot,ze),l(e,Ve),l(e,Q),l(Q,Bt),l(Bt,He),l(Q,qe),l(Q,zt),l(zt,ct),l(ct,Ze),l(Q,We),l(Q,Vt),l(Vt,lt),l(lt,Ge),l(Q,Je),l(Q,Ht),l(Ht,ut),l(ut,Xe),l(e,Qe),l(e,Y),l(Y,qt),l(qt,Ye),l(Y,ts),l(Y,Zt),l(Zt,dt),l(dt,es),l(Y,ss),l(Y,Wt),l(Wt,ht),l(ht,rs),l(Y,ns),l(Y,Gt),l(Gt,pt),l(pt,as),l(e,is),l(e,Jt),l(Jt,$t),l($t,At),l(At,ft),l(ft,Ot),l(At,os),l(At,gt),l(gt,_t),l($t,cs),l($t,Pt),l(Pt,mt),l(mt,xt)},p:Xt,i:Xt,o:Xt,d:function(ce){ce&&y(e)}};return yt("SvelteRegisterBlock",{block:fr,id:ke.name,type:"component",source:"",ctx:t}),fr}function En(t,e,s){let{$$slots:r={},$$scope:n}=e;ye("FooterLinks",r,[]);let a="https://www.hiro.so/wallet/install-web",o="https://stacks.org";const c=[];return Object.keys(e).forEach(d=>{!~c.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<FooterLinks> was created with unknown prop '${d}'`)}),t.$capture_state=()=>({stx_eco_discord:xs,stx_eco_twitter:Ts,stx_eco_github:Ns,webWalletLink:a,stacksOrg:o}),t.$inject_state=d=>{"webWalletLink"in d&&s(0,a=d.webWalletLink),"stacksOrg"in d&&s(1,o=d.stacksOrg)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[a,o]}class Cs extends ge{constructor(e){super(e),me(this,e,En,ke,le,{}),yt("SvelteRegisterComponent",{component:this,tagName:"FooterLinks",options:e,id:ke.name})}}const H="src/lib/header/Footer.svelte";function Ie(t){let e,s,r,n,a,o,c,d,w,f,u,$,S,A,h,k,O,E,C,M,q,Z,R;S=new Cs({$$inline:!0});const B={c:function(){e=g("div"),s=g("div"),r=g("div"),n=g("div"),a=g("div"),o=g("a"),c=g("img"),w=_(),f=g("div"),u=g("div"),$=g("div"),ls(S.$$.fragment),A=_(),h=g("div"),k=g("div"),O=g("div"),E=T("sBTC \xA9 2023"),C=_(),M=g("div"),q=g("div"),Z=T("For the \u2665 of crypto!"),this.h()},l:function(L){e=m(L,"DIV",{class:!0,id:!0});var z=b(e);s=m(z,"DIV",{class:!0});var F=b(s);r=m(F,"DIV",{class:!0});var et=b(r);n=m(et,"DIV",{class:!0});var J=b(n);a=m(J,"DIV",{class:!0});var K=b(a);o=m(K,"A",{class:!0,href:!0});var U=b(o);c=m(U,"IMG",{src:!0,alt:!0,width:!0,height:!0}),U.forEach(y),K.forEach(y),J.forEach(y),w=x(et),f=m(et,"DIV",{class:!0});var It=b(f);u=m(It,"DIV",{class:!0});var Et=b(u);$=m(Et,"DIV",{class:!0});var D=b($);us(S.$$.fragment,D),D.forEach(y),Et.forEach(y),It.forEach(y),et.forEach(y),A=x(F),h=m(F,"DIV",{class:!0});var W=b(h);k=m(W,"DIV",{class:!0});var st=b(k);O=m(st,"DIV",{class:!0});var nt=b(O);E=N(nt,"sBTC \xA9 2023"),nt.forEach(y),st.forEach(y),C=x(W),M=m(W,"DIV",{class:!0});var G=b(M);q=m(G,"DIV",{class:!0});var V=b(q);Z=N(V,"For the \u2665 of crypto!"),V.forEach(y),G.forEach(y),W.forEach(y),F.forEach(y),z.forEach(y),this.h()},h:function(){ue(c.src,d=rt)||i(c,"src",d),i(c,"alt","stacks ecosystem dao logo"),i(c,"width","198"),i(c,"height","auto"),v(c,H,10,14,361),i(o,"class","navbar-brand"),i(o,"href","/"),v(o,H,9,12,313),i(a,"class",""),v(a,H,8,10,286),i(n,"class","px-0 col-4"),v(n,H,7,8,251),i($,"class","col-12"),v($,H,16,12,559),i(u,"class","row"),v(u,H,15,10,529),i(f,"class","col-8"),v(f,H,14,8,499),i(r,"class","row mx-5"),v(r,H,6,6,220),i(O,"class","copywright s-llc3ExEW13Oc"),v(O,H,24,12,781),i(k,"class","mb-4"),v(k,H,23,8,749),i(q,"class","copywright s-llc3ExEW13Oc"),v(q,H,27,10,881),i(M,"class","mb-4"),v(M,H,26,8,851),i(h,"class","mx-5 mt-5 d-flex justify-content-between copy s-llc3ExEW13Oc"),v(h,H,22,6,680),i(s,"class","pt-5"),v(s,H,5,4,194),i(e,"class","container-fluid footer s-llc3ExEW13Oc"),i(e,"id","footer-section"),v(e,H,4,0,132)},m:function(L,z){de(L,e,z),l(e,s),l(s,r),l(r,n),l(n,a),l(a,o),l(o,c),l(r,w),l(r,f),l(f,u),l(u,$),ds(S,$,null),l(s,A),l(s,h),l(h,k),l(k,O),l(O,E),l(h,C),l(h,M),l(M,q),l(q,Z),R=!0},p:Xt,i:function(L){R||(Tt(S.$$.fragment,L),R=!0)},o:function(L){Lt(S.$$.fragment,L),R=!1},d:function(L){L&&y(e),hs(S)}};return yt("SvelteRegisterBlock",{block:B,id:Ie.name,type:"component",source:"",ctx:t}),B}function $n(t,e,s){let{$$slots:r={},$$scope:n}=e;ye("Footer",r,[]);const a=[];return Object.keys(e).forEach(o=>{!~a.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<Footer> was created with unknown prop '${o}'`)}),t.$capture_state=()=>({FooterLinks:Cs,logoWhite:rt}),[]}class Ps extends ge{constructor(e){super(e),me(this,e,$n,Ie,le,{}),yt("SvelteRegisterComponent",{component:this,tagName:"Footer",options:e,id:Ie.name})}}var An="https://stacks-node-api.mainnet.stacks.co",On="https://stacks-node-api.testnet.stacks.co",Ct=class{constructor(t={url:An}){p(this,"version",we.Mainnet);p(this,"chainId",re.Mainnet);p(this,"broadcastEndpoint","/v2/transactions");p(this,"transferFeeEstimateEndpoint","/v2/fees/transfer");p(this,"accountEndpoint","/v2/accounts");p(this,"contractAbiEndpoint","/v2/contracts/interface");p(this,"readOnlyFunctionCallEndpoint","/v2/contracts/call-read");p(this,"bnsLookupUrl");p(this,"_coreApiUrl");p(this,"fetcher");p(this,"getCoreApiUrl",()=>this._coreApiUrl);p(this,"isMainnet",()=>this.version===we.Mainnet);p(this,"getBroadcastApiUrl",()=>`${this.getCoreApiUrl()}${this.broadcastEndpoint}`);p(this,"getTransferFeeEstimateApiUrl",()=>`${this.getCoreApiUrl()}${this.transferFeeEstimateEndpoint}`);p(this,"getAccountApiUrl",t=>`${this.getCoreApiUrl()}${this.accountEndpoint}/${t}?proof=0`);p(this,"getAbiApiUrl",(t,e)=>`${this.getCoreApiUrl()}${this.contractAbiEndpoint}/${t}/${e}`);p(this,"getReadOnlyFunctionCallApiUrl",(t,e,s)=>`${this.getCoreApiUrl()}${this.readOnlyFunctionCallEndpoint}/${t}/${e}/${encodeURIComponent(s)}`);p(this,"getInfoUrl",()=>`${this.getCoreApiUrl()}/v2/info`);p(this,"getBlockTimeInfoUrl",()=>`${this.getCoreApiUrl()}/extended/v1/info/network_block_times`);p(this,"getPoxInfoUrl",()=>`${this.getCoreApiUrl()}/v2/pox`);p(this,"getRewardsUrl",(t,e)=>{let s=`${this.getCoreApiUrl()}/extended/v1/burnchain/rewards/${t}`;return e&&(s=`${s}?limit=${e.limit}&offset=${e.offset}`),s});p(this,"getRewardsTotalUrl",t=>`${this.getCoreApiUrl()}/extended/v1/burnchain/rewards/${t}/total`);p(this,"getRewardHoldersUrl",(t,e)=>{let s=`${this.getCoreApiUrl()}/extended/v1/burnchain/reward_slot_holders/${t}`;return e&&(s=`${s}?limit=${e.limit}&offset=${e.offset}`),s});p(this,"getStackerInfoUrl",(t,e)=>`${this.getCoreApiUrl()}${this.readOnlyFunctionCallEndpoint}
    ${t}/${e}/get-stacker-info`);if(!t.url&&!t.coreApiUrl)throw Error("[miro-stacks] Network initialized with no api url");this._coreApiUrl=t.url||t.coreApiUrl,this.bnsLookupUrl=t.bnsLookupUrl||t.url||t.coreApiUrl,this.fetcher=t.fetcher||Qt}get coreApiUrl(){return this._coreApiUrl}set coreApiUrl(t){throw new Error("Cannot modify property `coreApiUrl` after object initialization")}getNameInfo(t){let e=`${this.bnsLookupUrl}/v1/names/${t}`;return this.fetcher(e).then(s=>{if(s.status===404)throw new Error("Name not found");if(s.status!==200)throw new Error(`Bad response status: ${s.status}`);return s.json()}).then(s=>s.address?Object.assign({},s,{address:s.address}):s)}},ae=class extends Ct{constructor(e={url:On,fetcher:Qt}){super(e);p(this,"version",we.Testnet);p(this,"chainId",re.Testnet)}},_n=(t=>(t[t.OnChainOnly=1]="OnChainOnly",t[t.OffChainOnly=2]="OffChainOnly",t[t.Any=3]="Any",t))(_n||{});we.Mainnet;var xn=(t=>(t[t.Allow=1]="Allow",t[t.Deny=2]="Deny",t))(xn||{}),Tn=(t=>(t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible",t))(Tn||{}),Nn=(t=>(t[t.Standard=4]="Standard",t[t.Sponsored=5]="Sponsored",t))(Nn||{}),Cn=(t=>(t[t.SerializeP2PKH=0]="SerializeP2PKH",t[t.SerializeP2SH=1]="SerializeP2SH",t[t.SerializeP2WPKH=2]="SerializeP2WPKH",t[t.SerializeP2WSH=3]="SerializeP2WSH",t))(Cn||{}),Pn=(t=>(t[t.MainnetSingleSig=22]="MainnetSingleSig",t[t.MainnetMultiSig=20]="MainnetMultiSig",t[t.TestnetSingleSig=26]="TestnetSingleSig",t[t.TestnetMultiSig=21]="TestnetMultiSig",t))(Pn||{}),Rn=(t=>(t[t.Compressed=0]="Compressed",t[t.Uncompressed=1]="Uncompressed",t))(Rn||{}),Mn=(t=>(t[t.Equal=1]="Equal",t[t.Greater=2]="Greater",t[t.GreaterEqual=3]="GreaterEqual",t[t.Less=4]="Less",t[t.LessEqual=5]="LessEqual",t))(Mn||{}),Un=(t=>(t[t.DoesNotOwn=16]="DoesNotOwn",t[t.Owns=17]="Owns",t))(Un||{}),Dn=(t=>(t[t.STX=0]="STX",t[t.Fungible=1]="Fungible",t[t.NonFungible=2]="NonFungible",t))(Dn||{}),Fn=(t=>(t.Serialization="Serialization",t.Deserialization="Deserialization",t.SignatureValidation="SignatureValidation",t.FeeTooLow="FeeTooLow",t.BadNonce="BadNonce",t.NotEnoughFunds="NotEnoughFunds",t.NoSuchContract="NoSuchContract",t.NoSuchPublicFunction="NoSuchPublicFunction",t.BadFunctionArgument="BadFunctionArgument",t.ContractAlreadyExists="ContractAlreadyExists",t.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",t.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",t.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",t.BadAddressVersionByte="BadAddressVersionByte",t.NoCoinbaseViaMempool="NoCoinbaseViaMempool",t.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",t.ServerFailureDatabase="ServerFailureDatabase",t.ServerFailureOther="ServerFailureOther",t))(Fn||{}),Ln=(t=>(t[t.TokenTransfer=0]="TokenTransfer",t[t.SmartContract=1]="SmartContract",t[t.ContractCall=2]="ContractCall",t[t.PoisonMicroblock=3]="PoisonMicroblock",t[t.Coinbase=4]="Coinbase",t))(Ln||{});function Kn(t){let e=new fs;return e.appendByte(t.conditionType),e.push(jn(t.principal)),(t.conditionType===1||t.conditionType===2)&&e.push(Bn(t.assetInfo)),t.conditionType===2&&e.push(oo(t.assetName)),e.appendByte(t.conditionCode),(t.conditionType===0||t.conditionType===1)&&e.push(co(t.amount,!1,8)),e.concatBuffer()}function jn(t){let e=new fs;return e.push(Uint8Array.from([t.prefix])),e.push(fn(t.address)),t.prefix===lo.Contract&&e.push(ps(t.contractName)),e.concatBuffer()}function Bn(t){let e=new fs;return e.push(fn(t.address)),e.push(ps(t.contractName)),e.push(ps(t.assetName)),e.concatBuffer()}var zn=(t=>(t[t.PublicKeyCompressed=0]="PublicKeyCompressed",t[t.PublicKeyUncompressed=1]="PublicKeyUncompressed",t[t.SignatureCompressed=2]="SignatureCompressed",t[t.SignatureUncompressed=3]="SignatureUncompressed",t))(zn||{}),Ee=typeof document<"u",Vn=(t=>(t.SessionStorageKey="stacks-session",t.NetworkStorageKey="stacks-network",t))(Vn||{}),bt=Yt("localStorage",{returnEmptyObject:!0}),Hn={setItem:(t,e)=>{if(Ee)return bt==null?void 0:bt.setItem(t,e)},getItem:t=>{if(Ee){let e=bt==null?void 0:bt.getItem(t);if(e===null)throw new Error("defaultStorageAdapter: no value stored");return e}},removeItem:t=>{if(Ee)return bt==null?void 0:bt.removeItem(t)}},ie=t=>t?vt(ne(t,!0)):null;function qn(t){return t==null?void 0:t.map(e=>typeof e!="string"?vt(Kn(e)):e)}var $e=(t,e)=>e?new bs("ES256k",e).sign(t):yo(t),Ae=async(t,e)=>{let s={...t,postConditions:qn(t.postConditions)};return $e(s,e)},Zn=(t=>(t.ContractCall="contract_call",t.ContractDeploy="smart_contract",t.STXTransfer="token_transfer",t))(Zn||{});async function Wn({functionArgs:t,privateKey:e,...s}){let r=ie(e),n={...s,functionArgs:t.map(a=>gs(typeof a=="string"?a:ms(a))),txType:"contract_call",publicKey:r};return Ae(n,e)}async function Gn({privateKey:t,...e}){let s={...e,publicKey:ie(t),txType:"smart_contract"};return Ae(s,t)}async function Jn({privateKey:t,...e}){let s={...e,amount:typeof e.amount=="bigint"?Number(e.amount).toString(10):e.amount,publicKey:ie(t),txType:"token_transfer"};return Ae(s,t)}function Xn(t){let e=t.split(":");if(e.length!==3)throw new TypeError("Decentralized IDs must have 3 parts");if(e[0].toLowerCase()!=="did")throw new TypeError('Decentralized IDs must start with "did"');return e[1].toLowerCase()}function Qn(t){return t&&Xn(t)==="btc-addr"?t.split(":")[2]:void 0}async function Yn(t,e){let s=vs(t),r=s==null?void 0:s.payload,n;if(r.private_key)try{let a=uo(r.private_key);n=await ho({privateKey:e,cipherObject:a})}catch{console.error("[micro-stacks] failed to decrypt appPrivateKey")}return{addresses:r.profile.stxAddress,appPrivateKey:n,associationToken:r.associationToken,hubUrl:r.hubUrl,public_keys:r.public_keys,profile:r.profile,profile_url:r.profile_url,username:r.username,version:r.version,decentralizedID:r.iss,identityAddress:Qn(r.iss)}}function Rs(){return Yt("StacksProvider",{returnEmptyObject:!1,usageDesc:"authenticate",throwIfUnavailable:!0})}async function ta(t,e=Hn,s=JSON.stringify){var r,n;if(!t.appDetails)throw Error("[micro-stacks] authenticate error: `authOptions.appDetails` are required for authentication");try{let a=vt(gn()),o=await na(t,a),c=await Yn(o,a);return(r=t==null?void 0:t.onFinish)==null||r.call(t,c),e.setItem("stacks-session",s(c)),c}catch(a){(n=t==null?void 0:t.onCancel)==null||n.call(t,a.message)}}function ea(t,e){if(!t.appDetails)throw Error("[micro-stacks] authenticate error: `authOptions.appDetails` are required for authentication");let s=t.scopes||[],r=Yt("location",{returnEmptyObject:!0}).origin;return{scopes:[...new Set(["store_write",...s])],redirect_uri:r,public_keys:[e],domain_name:r,appDetails:t.appDetails}}async function sa(t,e){return new bs("ES256k",e).sign(t)}async function ra(t,e){let s=vt(ne(e)),r=ea(t,s);return sa(r,e)}async function na(t,e){let s=Rs();if(!s)throw Error("This function can only be called on the client, and with the presence of StacksProvider");let r=await ra(t,e);return s.authenticationRequest(r)}function Oe(t){return async function(e){let{token:s,onFinish:r,onCancel:n}=e;try{let a=Rs();if(!a)throw new Error("[micro-stacks/connect] No Stacks provider");let o=a[t];if(typeof o!="function")throw new Error(`[micro-stacks/connect] StacksProvider method ${t} not found`);let c=await o(s);r==null||r(c)}catch(a){n==null||n(a==null?void 0:a.message)}}}var aa=Oe("transactionRequest"),ia=Oe("signatureRequest"),oa=Oe("structuredDataSignatureRequest"),ca=(t=>(t.Chrome="https://chrome.google.com/webstore/detail/hiro-wallet/ldinpeekobnhjjdofggfgjlcehhmanlj",t.Firefox="https://addons.mozilla.org/en-US/firefox/addon/hiro-wallet/",t.Mobile="https://www.xverse.app",t.Browser="https://www.hiro.so/wallet/install-web",t))(ca||{}),la=async t=>{let e={stxAddress:t.stxAddress,message:t.message,appDetails:t.appDetails??null,publicKey:ie(t.privateKey),network:t.network};return $e(e,t.privateKey)},ua=async t=>{try{let e=await la({message:t.message,network:t.network,privateKey:t.privateKey,stxAddress:t.stxAddress,authOrigin:t.authOrigin,appDetails:t.appDetails});return ia({token:e,onFinish:t.onFinish,onCancel:t.onCancel})}catch(e){console.error("[micro-stacks] handleSignMessageRequest failed"),console.error(e)}},da=(t,e,s)=>vo({name:mn(t),version:mn(e),"chain-id":wo(s)}),ha=t=>{var e;let s=typeof t.message!="string"?ms(t.message):t.message,r=da(t.domain.name,t.domain.version,t.domain.chainId??((e=t.network)==null?void 0:e.chainId)??re.Mainnet),n=ms(r),a={stxAddress:t.stxAddress,message:gs(s),domain:gs(n),appDetails:t.appDetails,publicKey:ie(t.privateKey),network:t.network};return $e(a,t==null?void 0:t.privateKey)},pa=async t=>{try{let e=await ha({message:t.message,domain:t.domain,privateKey:t.privateKey,stxAddress:t.stxAddress,authOrigin:t.authOrigin,appDetails:t.appDetails,network:t.network});return oa({token:e,onFinish:t.onFinish,onCancel:t.onCancel})}catch(e){console.error("[micro-stacks] handleSignStructuredDataRequest failed"),console.error(e)}},fa=9007199254740991;function Ms(t){if(t<0||t>fa||t%1!==0)throw new RangeError("value out of range")}var Us=(t,e,s)=>{Ms(t);let r;if(e||(e=new Uint8Array(ga(t))),!bo(e))throw new TypeError("uint8Array must be of Uint8Array type");return s||(s=0),t<253?(be(e,t,s),r=1):t<=65535?(be(e,253,s),So(e,t,s+1),r=3):t<=4294967295?(be(e,254,s),Ss(e,t,s+1),r=5):(be(e,255,s),Ss(e,t>>>0,s+1),Ss(e,t/4294967296|0,s+5),r=9),Us.bytes=r,e};function ga(t){return Ms(t),t<253?1:t<=65535?3:t<=4294967295?5:9}var ma=`Stacks Signed Message:
`,Ds=ys.utf8ToBytes(ma),ya=`Stacks Message Signing:
`,va=ys.utf8ToBytes(ya);function Fs(t,e=Ds){return po(wa(t,e))}function wa(t,e=Ds){let s=typeof t=="string"?ys.utf8ToBytes(t):t,r=Us(s.length);return fo([e,r,s])}var _e=32;function ba(t){if(t.length<_e*2*2+1)throw new Error("Invalid signature");let e=t.slice(0,2),s=t.slice(2,2+_e*2),r=t.slice(2+_e*2);return{recoveryBytes:ws(e),r:s,s:r}}function Sa(t){return t.slice(-2)+t.slice(0,-2)}var Ls=({hash:t,signature:e,recoveryBytes:s})=>go(t,e,Number(s),!0),Ks=t=>{let{signature:e,mode:s="rsv"}=t,{r,s:n,recoveryBytes:a}=ba(s==="rsv"?Sa(e):e);return{signature:new mo(ws(r),ws(n)),recoveryBytes:a}},js=t=>{if(!t.publicKey&&!t.stxAddress)throw Error("[micro-stacks/connect[ verifyMessageSignature -- You must pass `stxAddress` if you are recovering the public key from the signature");let{message:e,mode:s="rsv"}=t,r=t.publicKey;try{let n=typeof e=="string"?Fs(e,t.prefix):e,{signature:a,recoveryBytes:o}=Ks({signature:t.signature,mode:s});if(!r){let[c]=Se(t.stxAddress);r=vt(Ls({hash:n,signature:a,recoveryBytes:o}));let d=ks(r,c);if(d!==t.stxAddress)return console.error(`[micro-stacks/connect] verifyMessageSignature Stacks address is not correct. expected: ${t.stxAddress}, received: ${d}`),!1}return ko(a,n,r,{strict:!1})}catch(n){return console.error("[micro-stacks/connect] verifyMessageSignature failed",n),!1}},ka=t=>js(t)||js({...t,prefix:va});const Bs=t=>{let e;const s=new Set,r=(o,c)=>{const d=typeof o=="function"?o(e):o;if(d!==e){const w=e;e=c??typeof d!="object"?d:Object.assign({},e,d),s.forEach(f=>f(e,w))}},n=()=>e,a={setState:r,getState:n,subscribe:o=>(s.add(o),()=>s.delete(o)),destroy:()=>s.clear()};return e=t(r,n,a),a},Ia=t=>t?Bs(t):Bs,Ea=t=>(e,s,r)=>{const n=r.subscribe;return r.subscribe=(a,o,c)=>{let d=a;if(o){const w=(c==null?void 0:c.equalityFn)||Object.is;let f=a(r.getState());d=u=>{const $=a(u);if(!w(f,$)){const S=f;o(f=$,S)}},c!=null&&c.fireImmediately&&o(f,f)}return n(d)},t(e,s,r)},$a=Ea,he=t=>e=>{try{const s=t(e);return s instanceof Promise?s:{then(r){return he(r)(s)},catch(r){return this}}}catch(s){return{then(r){return this},catch(r){return he(r)(s)}}}},Aa=(t,e)=>(s,r,n)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:k=>k,version:0,merge:(k,O)=>({...O,...k}),...e},o=!1;const c=new Set,d=new Set;let w;try{w=a.getStorage()}catch{}if(!w)return t((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),s(...k)},r,n);const f=he(a.serialize),u=()=>{const k=a.partialize({...r()});let O;const E=f({state:k,version:a.version}).then(C=>w.setItem(a.name,C)).catch(C=>{O=C});if(O)throw O;return E},$=n.setState;n.setState=(k,O)=>{$(k,O),u()};const S=t((...k)=>{s(...k),u()},r,n);let A;const h=()=>{var k;if(!w)return;o=!1,c.forEach(E=>E(r()));const O=((k=a.onRehydrateStorage)==null?void 0:k.call(a,r()))||void 0;return he(w.getItem.bind(w))(a.name).then(E=>{if(E)return a.deserialize(E)}).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==a.version){if(a.migrate)return a.migrate(E.state,E.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return E.state}).then(E=>{var C;return A=a.merge(E,(C=r())!=null?C:S),s(A,!0),u()}).then(()=>{O==null||O(A,void 0),o=!0,d.forEach(E=>E(A))}).catch(E=>{O==null||O(void 0,E)})};return n.persist={setOptions:k=>{a={...a,...k},k.getStorage&&(w=k.getStorage())},clearStorage:()=>{w==null||w.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>h(),hasHydrated:()=>o,onHydrate:k=>(c.add(k),()=>{c.delete(k)}),onFinishHydration:k=>(d.add(k),()=>{d.delete(k)})},h(),A||S},Oa=Aa;var _a=!1,xe="Invariant failed";function xa(t,e){if(!t){if(_a)throw new Error(xe);var s=typeof e=="function"?e():e,r=s?"".concat(xe,": ").concat(s):xe;throw new Error(r)}}function Ta(t){return t=Na(t),t=Ca(t),Pa(t)}function Na(t){let e=/(^|[^\\]);.*/g;return t.replace(e,function(s,r){return r||""})}function Ca(t){let e=[],s=/\([\s\S]*?\)/gim,r=s.exec(t);for(;r!==null;){let a=r[0].replace(/\s+/gm," ");e.push({match:r,replacement:a}),r=s.exec(t)}let n=t.split("");for(let a of e){let{match:o,replacement:c}=a;n.splice(o.index,o[0].length,c)}return n.join("").replace(/\(|\)/gim," ")}function Pa(t){let e={},s=t.split(`
`);for(let r of s){if(!r||!r.trim())continue;let n=r.toUpperCase();/\s+TXT\s+/.test(n)?(e.txt=e.txt||[],e.txt.push(Ka(r))):n.indexOf("$ORIGIN")===0?e.$origin=r.split(/\s+/g)[1]:n.indexOf("$TTL")===0?e.$ttl=parseInt(r.split(/\s+/g)[1],10):/\s+SOA\s+/.test(n)?e.soa=Ra(r):/\s+NS\s+/.test(n)?(e.ns=e.ns||[],e.ns.push(Ma(r))):/\s+A\s+/.test(n)?(e.a=e.a||[],e.a.push(Ua(r,e.a))):/\s+AAAA\s+/.test(n)?(e.aaaa=e.aaaa||[],e.aaaa.push(Da(r))):/\s+CNAME\s+/.test(n)?(e.cname=e.cname||[],e.cname.push(Fa(r))):/\s+MX\s+/.test(n)?(e.mx=e.mx||[],e.mx.push(La(r))):/\s+PTR\s+/.test(n)?(e.ptr=e.ptr||[],e.ptr.push(ja(r,e.ptr,e.$origin))):/\s+SRV\s+/.test(n)?(e.srv=e.srv||[],e.srv.push(Ba(r))):/\s+SPF\s+/.test(n)?(e.spf=e.spf||[],e.spf.push(za(r))):/\s+URI\s+/.test(n)&&(e.uri=e.uri||[],e.uri.push(Va(r)))}return e}function Ra(t){let e={},s=t.trim().split(/\s+/g),r=s.length;return e.name=s[0],e.minimum=parseInt(s[r-1],10),e.expire=parseInt(s[r-2],10),e.retry=parseInt(s[r-3],10),e.refresh=parseInt(s[r-4],10),e.serial=parseInt(s[r-5],10),e.rname=s[r-6],e.mname=s[r-7],isNaN(s[1])||(e.ttl=parseInt(s[1],10)),e}function Ma(t){let e=t.trim().split(/\s+/g),s=e.length,r={name:e[0],host:e[s-1]};return isNaN(e[1])||(r.ttl=parseInt(e[1],10)),r}function Ua(t,e){let s=t.trim().split(/\s+/g),r=t.trim().toUpperCase().split(/\s+/g),n=s.length,a={name:s[0],ip:s[n-1]};return r.lastIndexOf("A")===0&&(e.length?a.name=e[e.length-1].name:a.name="@"),isNaN(s[1])||(a.ttl=parseInt(s[1],10)),a}function Da(t){let e=t.trim().split(/\s+/g),s=e.length,r={name:e[0],ip:e[s-1]};return isNaN(e[1])||(r.ttl=parseInt(e[1],10)),r}function Fa(t){let e=t.trim().split(/\s+/g),s=e.length,r={name:e[0],alias:e[s-1]};return isNaN(e[1])||(r.ttl=parseInt(e[1],10)),r}function La(t){let e=t.trim().split(/\s+/g),s=e.length,r={name:e[0],preference:parseInt(e[s-2],10),host:e[s-1]};return isNaN(e[1])||(r.ttl=parseInt(e[1],10)),r}function Ka(t){let e=t.trim().match(/[^\s"']+|"[^"]*"|'[^']*'/g);if(!e)throw new Error("Failure to tokenize TXT record");let s=e.length,r=e.indexOf("TXT");function n(c){return c.indexOf('"')>-1&&(c=c.split('"')[1]),c}let a;s-r-1>1?a=[...e.slice(r+1).map(n)]:a=n(e[s-1]);let o={name:e[0],txt:a};return isNaN(e[1])||(o.ttl=parseInt(e[1],10)),o}function ja(t,e,s){let r=t.trim().split(/\s+/g);t.trim().toUpperCase().split(/\s+/g).lastIndexOf("PTR")===0&&e[e.length-1]&&r.unshift(e[e.length-1].name);let n=r.length,a={name:r[0],fullname:`${r[0]}.${s}`,host:r[n-1]};return isNaN(r[1])||(a.ttl=parseInt(r[1],10)),a}function Ba(t){let e=t.trim().split(/\s+/g),s=e.length,r={name:e[0],target:e[s-1],priority:parseInt(e[s-4],10),weight:parseInt(e[s-3],10),port:parseInt(e[s-2],10)};return isNaN(e[1])||(r.ttl=parseInt(e[1],10)),r}function za(t){let e=t.trim().split(/\s+/g),s={name:e[0],data:""},r=e.length;for(;r-- >4;)s.data=e[r]+" "+s.data.trim();return isNaN(e[1])||(s.ttl=parseInt(e[1],10)),s}function Va(t){let e=t.trim().split(/\s+/g),s=e.length,r={name:e[0],target:e[s-1].replace(/"/g,""),priority:parseInt(e[s-3],10),weight:parseInt(e[s-2],10)};return isNaN(e[1])||(r.ttl=parseInt(e[1],10)),r}var Ha=Object.defineProperty,qa=(t,e,s)=>e in t?Ha(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Za=(t,e,s)=>(qa(t,typeof e!="symbol"?e+"":e,s),s);function Wa(t){return(t==null?void 0:t.map(e=>({...e,domain:e.path})))??null}function Ga(t){let{hubInfo:e,privateKey:s,gaiaHubUrl:r,associationToken:n=null,scopes:a}=t,{challenge_text:o}=e,c=vt(ne(s,!0)),d=gn(16).toString();return{gaiaChallenge:o,hubUrl:r,iss:c,salt:d,associationToken:n,scopes:Wa(a)}}function Ja(t){let e=Ga(t);return`v1:${new bs("ES256K",t.privateKey).signSync(e)}`}var Xa={challenge_text:'["gaiahub","0","storage2.blockstack.org","blockstack_storage_please_sign"]',latest_auth_version:"v1",max_file_upload_size_megabytes:20,read_url_prefix:"https://gaia.blockstack.org/hub/"};function Qa(t){let{gaiaHubUrl:e,privateKey:s,associationToken:r,scopes:n}=t,a=Xa,{read_url_prefix:o,max_file_upload_size_megabytes:c}=a,d=Ja({hubInfo:a,privateKey:s,gaiaHubUrl:e,associationToken:r,scopes:n});return{address:yn(s),url_prefix:o,token:d,server:e,max_file_upload_size_megabytes:c??20}}var St={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(St);var zs=class extends Error{constructor(e){super();p(this,"message");p(this,"code");p(this,"parameter");let s=e.message,r=`Error Code: ${e.code}`,n=this.stack;if(n)r+=`Stack Trace:
${n}`;else try{throw new Error}catch(a){n=a.stack}s+=`
If you believe this exception is caused by a bug in blockstack.js,
      please file a bug report: https://github.com/blockstack/blockstack.js/issues

${r}`,this.message=s,this.code=e.code,this.parameter=e.parameter?e.parameter:void 0}toString(){return`${super.toString()}
    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}},kt=class extends zs{constructor(t){let e=`Failed to verify signature: ${t}`;super({code:St.SIGNATURE_VERIFICATION_ERROR,message:e}),this.message=e,this.name="SignatureVerificationError"}},Kt=class extends zs{constructor(e,s){super(e);p(this,"hubError");s&&(this.hubError={statusCode:s.status,statusText:s.statusText},typeof s.body=="string"?this.hubError.message=s.body:typeof s.body=="object"&&Object.assign(this.hubError,s.body))}},Vs=class extends Kt{constructor(t,e){super({message:t,code:St.DOES_NOT_EXIST},e),this.name="DoesNotExist"}},Ya=class extends Kt{constructor(t,e){super({message:t,code:St.CONFLICT_ERROR},e),this.name="ConflictError"}},ti=class extends Kt{constructor(t,e){super({message:t,code:St.NOT_ENOUGH_PROOF_ERROR},e),this.name="NotEnoughProofError"}},ei=class extends Kt{constructor(t,e){super({message:t,code:St.BAD_PATH_ERROR},e),this.name="BadPathError"}},si=class extends Kt{constructor(t,e){super({message:t,code:St.VALIDATION_ERROR},e),this.name="ValidationError"}},Te=class extends Kt{constructor(e,s,r){super({message:e,code:St.PAYLOAD_TOO_LARGE_ERROR},s);p(this,"hubError");p(this,"maxUploadByteSize");this.name="PayloadTooLargeError",this.maxUploadByteSize=r}},ri=class extends Kt{constructor(t,e){super({message:t,code:St.PRECONDITION_FAILED_ERROR},e),this.name="PreconditionFailedError"}};async function ni(t){let e="",s;try{e=await t.text();try{s=JSON.parse(e)}catch{}}catch(a){console.debug(`Error getting bad http response text: ${a}`)}let r=t.status,n=t.statusText;return{status:r,statusText:n,body:s||e}}function Hs(t){return Number.isFinite(t)?Math.floor(t*1024*1024):0}async function qs(t,e,s){if(t.ok)throw new Error("Cannot get a Stacks from a valid response.");let r=await ni(t);if(r.status===401)throw new si(e,r);if(r.status===402)throw new ti(e,r);if(r.status===403)throw new ei(e,r);if(r.status===404)throw new Vs(e,r);if(r.status===409)throw new Ya(e,r);if(r.status===412)throw new ri(e,r);if(r.status===413){let n=s&&s.max_file_upload_size_megabytes?Hs(s.max_file_upload_size_megabytes):0;throw new Te(e,r,n)}else throw new Error(e)}function ai(t){if(!t||!t.hubError||!t.hubError.statusCode)return!1;let e=t.hubError.statusCode;return e===401||e===409||e>=500&&e<=599}async function Ne(t){let{filename:e,contents:s,hubConfig:r,contentType:n="application/octet-stream"}=t,a={"Content-Type":n,Authorization:`bearer ${r.token}`},o=await Qt(`${r.server}/store/${r.address}/${e}`,{method:"POST",headers:a,body:s});if(!o.ok)throw await qs(o,"Error when uploading to Gaia hub.",r);let c=await o.text();return JSON.parse(c)}function Zs(t,e){return Promise.resolve(`${e.url_prefix}${e.address}/${t}`)}var te=".sig",Ws="https://stacks-node-api.stacks.co/v1/names",Gs=class{constructor(t,e){p(this,"content");p(this,"wasString");p(this,"contentType");p(this,"contentByteLength");p(this,"loadedData");this.wasString=typeof t=="string",this.content=Gs.normalizeContentDataType(t,e),this.contentType=e||this.detectContentType(),this.contentByteLength=this.detectContentLength()}static normalizeContentDataType(t,e){try{if(typeof t=="string"){let s=(e||"").toLowerCase().replace("-","");if(s.includes("charset")&&!s.includes("charset=utf8")&&!s.includes("charset=ascii"))throw new Error(`Unable to determine byte length with charset: ${e}`);return new TextEncoder().encode(t)}else{if(t instanceof Uint8Array)return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(typeof Blob<"u"&&t instanceof Blob)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(Array.isArray(t)){if(t.length>0&&(!Number.isInteger(t[0])||t[0]<0||t[0]>255))throw new Error(`Unexpected array values provided as file data: value "${t[0]}" at index 0 is not an octet number. ${this.supportedTypesMsg}`);return new Uint8Array(t)}else{let s=Object.prototype.toString.call(t);throw new Error(`Unexpected type provided as file data: ${s}. ${this.supportedTypesMsg}`)}}}catch(s){throw console.error(s),new Error(`Error processing data: ${s}`)}}detectContentType(){return this.wasString?"text/plain; charset=utf-8":typeof Blob<"u"&&this.content instanceof Blob&&this.content.type?this.content.type:"application/octet-stream"}detectContentLength(){if(ArrayBuffer.isView(this.content)||this.content instanceof Uint8Array)return this.content.byteLength;if(typeof Blob<"u"&&this.content instanceof Blob)return this.content.size;let t=Object.prototype.toString.call(this.content),e=new Error(`Unexpected type "${t}" while detecting content length`);throw console.error(e),e}async loadContent(){try{if(this.content instanceof Uint8Array)return this.content;if(ArrayBuffer.isView(this.content))return new Uint8Array(this.content.buffer,this.content.byteOffset,this.content.byteLength);if(typeof Blob<"u"&&this.content instanceof Blob){let t=new FileReader;return await new Promise((e,s)=>{t.onerror=r=>{s(r)},t.onload=()=>{let r=t.result;e(new Uint8Array(r))},t.readAsArrayBuffer(this.content)})}else{let t=Object.prototype.toString.call(this.content);throw new Error(`Unexpected type ${t}`)}}catch(t){console.error(t);let e=new Error(`Error loading content: ${t}`);throw console.error(e),e}}load(){return this.loadedData===void 0&&(this.loadedData=this.loadContent()),this.loadedData}},Js=Gs;Za(Js,"supportedTypesMsg","Supported types are: `string` (to be UTF8 encoded), `Uint8Array`, `Blob`, `File`, `ArrayBuffer`, `UInt8Array` or any other typed array buffer. ");async function ii(t,e,s){let{privateKey:r}=s,{encrypt:n,sign:a,gaiaHubConfig:o,cipherTextEncoding:c}=s,{contentType:d=""}=s,w=Hs(o.max_file_upload_size_megabytes),f=w>0,u=new Js(e,d);if(d=u.contentType,!n&&f&&u.contentByteLength>w){let S=`The max file upload size for this hub is ${w} bytes, the given content is ${u.contentByteLength} bytes`,A=new Te(S,null,w);throw console.error(A),A}if(n&&f&&c){let S=Io({contentLength:u.contentByteLength,wasString:u.wasString,sign:!!a,cipherTextEncoding:c});if(S>w){let A=`The max file upload size for this hub is ${w} bytes, the given content is ${S} bytes after encryption`,h=new Te(A,null,w);throw console.error(h),h}}let $;if(!n&&a){let S=await u.load();if(typeof a=="string")r=a;else if(!r)throw Error("Need to pass private key");let A=await vn({contents:S,privateKey:r});$=async h=>(await Promise.all([Ne({filename:t,contents:S,hubConfig:h,contentType:d}),Ne({filename:`${t}${te}`,contents:JSON.stringify(A),hubConfig:h,contentType:"application/json"})]))[0].publicURL}else{let S;if(!n&&!a)S=u.content;else{let A;if(typeof n=="string")A=n;else if(typeof a=="string")A=vt(ne(a,!0));else if(r)A=vt(ne(r,!0));else throw new Error("No private key passed");let h=await u.load(),k=await wn(h,{publicKey:A,wasString:u.wasString,cipherTextEncoding:c,privateKey:r});if(S=JSON.stringify(k),r){let{signature:O,publicKey:E}=await vn({contents:k,privateKey:r});S=JSON.stringify({signature:O,publicKey:E,cipherText:k})}d="application/json"}$=async A=>(await Ne({filename:t,contents:S,hubConfig:A,contentType:d})).publicURL}try{return await $(o)}catch(S){if(ai(S))return console.error(S),console.error("Possible recoverable error during Gaia upload, retrying..."),await $(o);throw S}}function oi(t){if(!t.hasOwnProperty("uri")||!Array.isArray(t.uri)||t.uri.length<1)return null;let e=t.uri[0];if(!e.hasOwnProperty("target"))return null;let s=e.target;return s.startsWith("https")||s.startsWith("http")||(s=`https://${s}`),s}function Ce(t,e){let s;return e.proof&&e.proof.url&&(s=e.proof.url),{"@type":"Account",service:t,identifier:e.username,proofType:"http",proofUrl:s}}function ci(t){let e={"@type":"Person"};if(t){t.name&&t.name.formatted&&(e.name=t.name.formatted),t.bio&&(e.description=t.bio),t.location&&t.location.formatted&&(e.address={"@type":"PostalAddress",addressLocality:t.location.formatted});let s=[];t.avatar&&t.avatar.url&&s.push({"@type":"ImageObject",name:"avatar",contentUrl:t.avatar.url}),t.cover&&t.cover.url&&s.push({"@type":"ImageObject",name:"cover",contentUrl:t.cover.url}),s.length&&(e.image=s),t.website&&(e.website=[{"@type":"WebSite",url:t.website}]);let r=[];t.bitcoin&&t.bitcoin.address&&r.push({"@type":"Account",role:"payment",service:"bitcoin",identifier:t.bitcoin.address}),t.twitter&&t.twitter.username&&r.push(Ce("twitter",t.twitter)),t.facebook&&t.facebook.username&&r.push(Ce("facebook",t.facebook)),t.github&&t.github.username&&r.push(Ce("github",t.github)),t.auth&&t.auth.length>0&&t.auth[0]&&t.auth[0].publicKeychain&&r.push({"@type":"Account",role:"key",service:"bip32",identifier:t.auth[0].publicKeychain}),t.pgp&&t.pgp.url&&r.push({"@type":"Account",role:"key",service:"pgp",identifier:t.pgp.fingerprint,contentUrl:t.pgp.url}),e.account=r}return e}function li(t,e){let s=vs(t);if(!s)throw Error("no decoded token");let r=s.payload;if(typeof r=="string")throw new Error("Unexpected token payload type of string");if(r.hasOwnProperty("subject")&&r.subject){if(!r.subject.hasOwnProperty("publicKey"))throw new Error("Token doesn't have a subject public key")}else throw new Error("Token doesn't have a subject");if(r.hasOwnProperty("issuer")&&r.issuer){if(!r.issuer.hasOwnProperty("publicKey"))throw new Error("Token doesn't have an issuer public key")}else throw new Error("Token doesn't have an issuer");if(!r.hasOwnProperty("claim"))throw new Error("Token doesn't have a claim");let n=r.issuer.publicKey,a=ks(n);if(e!==n&&e!==a)throw new Error("Token issuer public key does not match the verifying value");let o=new Ao(s.header.alg,n);if(!o)throw new Error("Invalid token verifier");if(!o.verify(t))throw new Error("Token verification failed");return s}function ui(t,e){let s=e?li(t,e):vs(t);if(s&&s.hasOwnProperty("payload")){let r=s.payload;if(typeof r=="string")throw new Error("[micro-stacks] extractProfile: Unexpected token payload type of string");if(r.hasOwnProperty("claim"))return r.claim}return{}}async function di(t,e){let s=Ta(t);if(s.hasOwnProperty("$origin")||(s=null),!(s&&Object.keys(s).length>0))return ci(JSON.parse(t));let r=oi(s);if(r)try{let n=await(await Qt(r)).json();return ui(n[0].token,e)}catch(n){throw console.error(`[micro-stacks] resolveZoneFileToProfile: error fetching token file ${r}: ${n}`),n}return console.debug("[micro-stacks] Token file url not found. Resolving to blank profile."),{}}async function hi(t){let{username:e,zoneFileLookupURL:s=Ws}=t;if(!e)return Promise.reject();let r=`${s.replace(/\/$/,"")}/${t.username}`,n=await(await Qt(r)).json();if(n.hasOwnProperty("zonefile")&&n.hasOwnProperty("address"))return await di(n.zonefile,t.verify?n.address:void 0);throw new Error("Invalid zonefile lookup response: did not contain `address` or `zonefile` field")}async function Xs(t,e,s,r){let n=await hi({username:e,zoneFileLookupURL:r}),a;if(n)return n.hasOwnProperty("apps")?n.apps.hasOwnProperty(s)&&(a=`${n.apps[s].replace(/\/?(\?|#|$)/,"/$1")}${t}`):n.hasOwnProperty("appsMeta")&&n.appsMeta.hasOwnProperty(s)&&(a=`${n.appsMeta[s].replace(/\/?(\?|#|$)/,"/$1")}${t}`),a}async function pi(t,e){let s;if(e.username?s=await Xs(t,e.username,e.app,e.zoneFileLookupURL):s=await Zs(t,e.gaiaHubConfig),s)return s;throw new Error("Missing readURL")}async function Qs(t){let{app:e,username:s,zoneFileLookupURL:r,gaiaHubConfig:n}=t,a;s?a=await Xs("/",s,e,r):n&&(a=await Zs("/",n));let o=/([13][a-km-zA-HJ-NP-Z0-9]{26,35})/.exec(a);if(!o)throw new Error("Failed to parse gaia address");return o[o.length-1]}async function Pe(t){let{path:e,forceText:s,app:r,username:n,zoneFileLookupURL:a,gaiaHubConfig:o}=t,c=await pi(e,{app:r,username:n,zoneFileLookupURL:a,gaiaHubConfig:o}),d=await Qt(c);if(!d.ok)throw await qs(d,`getFile ${e} failed.`,null);let w=d.headers.get("Content-Type");if(typeof w=="string"&&(w=w.toLowerCase()),s||w===null||w.startsWith("text")||w.startsWith("application/json"))return d.text();{let f=await d.arrayBuffer();return Eo(f)}}async function fi(t,e){let{app:s,username:r,zoneFileLookupURL:n,gaiaHubConfig:a}=e,o=`${t}${te}`;try{let[c,d,w]=await Promise.all([Pe({path:t,app:s,username:r,zoneFileLookupURL:n,forceText:!1,gaiaHubConfig:a}),Pe({path:o,app:s,username:r,zoneFileLookupURL:n,forceText:!0,gaiaHubConfig:a}),Qs({app:s,username:r,zoneFileLookupURL:n,gaiaHubConfig:a})]);if(!c)return c;if(!w)throw new kt(`Failed to get gaia address for verification of: ${t}`);if(!d||typeof d!="string")throw new kt(`Failed to obtain signature for file: ${t} -- looked in ${t}${te}`);let f,u;try{let h=JSON.parse(d);f=h.signature,u=h.publicKey}catch(h){throw h instanceof SyntaxError?new Error(`Failed to parse signature content JSON (path: ${t}${te}) The content may be corrupted.`):h}let $=Es(u),S=typeof c=="string"?$o(c):c,A=bn({signature:f,contents:S,publicKey:u});if(w!==$)throw new kt(`Signer pubkey address (${$}) doesn't match gaia address (${w})`);if(A)return c;throw new kt(`Contents do not match ECDSA signature: path: ${t}, signature: ${t}${te}`)}catch(c){throw c instanceof Vs&&c.message.indexOf(o)>=0?new kt(`Failed to obtain signature for file: ${t} -- looked in ${t}${te}`):c}}async function gi(t){let{path:e,storedContents:s,app:r,privateKey:n,username:a,zoneFileLookupURL:o,gaiaHubConfig:c}=t,d=n,w=d?ne(d,!0):null,f=null;if(a||c?f=await Qs({app:r,username:a,zoneFileLookupURL:o,gaiaHubConfig:c}):w&&(f=Es(w)),!f)throw new kt(`Failed to get gaia address for verification of: ${e}`);let u;try{u=JSON.parse(s)}catch(k){throw k instanceof SyntaxError?new Error("Failed to parse encrypted, signed content JSON. The content may not be encrypted. If using getFile, try passing { verify: false, decrypt: false }."):k}let $=u.signature,S=u.publicKey,A=u.cipherText,h=Es(S);if(!S||!A||!$)throw new kt(`Failed to get signature verification data from file: ${e}`);if(h!==f)throw new kt(`Signer pubkey address (${h}) doesn't match gaia address (${f})`);if(!bn({signature:$,contents:A,publicKey:S}))throw new kt(`Contents do not match ECDSA signature in file: ${e}`);if(!n)throw Error("Private key needs to be passed in order to decrypt content");return Is(A,{privateKey:n})}async function mi(t,e){let s={decrypt:!0,verify:!1,app:Yt("location",{returnEmptyObject:!0}).origin,zoneFileLookupURL:Ws,...e};if(s.verify&&!s.decrypt)return fi(t,s);let r=await Pe({path:t,app:s.app,username:s.username,zoneFileLookupURL:s.zoneFileLookupURL,forceText:!!s.decrypt,gaiaHubConfig:s.gaiaHubConfig});if(r===null)return r;if(typeof r!="string")throw new Error("[micro-stacks/storage] Expected to get back a string for the cipherText");let n=!!s.verify,a=!!s.decrypt,o=typeof s.decrypt=="string"?s.decrypt:s.privateKey;if(r.includes("signature")&&r.includes("publicKey")&&(n=!0),r.includes("cipherText")&&r.includes("ephemeralPK")&&(a=!0),!n&&!a)return r;let c=!r.includes("cipherText");if(a&&c)throw new Error(`[micro-stacks/storage] Expected to get back a string that includes cipherText, is it encrypted? got back: ${JSON.stringify(r)}`);if(!o)throw new Error("[micro-stacks/storage] No private key was passed to getFile, a private key needs to be passed if decrypt is set to true");if(!n)return Is(r,{privateKey:o});if(a&&n)return gi({path:t,storedContents:r,app:s.app,privateKey:o,username:s.username,zoneFileLookupURL:s.zoneFileLookupURL,gaiaHubConfig:s.gaiaHubConfig});throw new Error("[micro-stacks/storage] Should be unreachable.")}var yi="micro-stacks",Ys={getItem:t=>null,setItem:(t,e)=>{},removeItem:t=>{}},tr=vi({storage:typeof window<"u"?window.localStorage:Ys,serialize:JSON.stringify,deserialize:JSON.parse});function vi({storage:t,key:e=yi,serialize:s,deserialize:r}){return{...t,getItem:(n,a=null)=>{let o=`${e}.${n.replace(`${e}.`,"")}`,c=t.getItem(o);if(!r)return c??a;try{return c?r(c):a}catch(d){return console.warn(d),a}},setItem:(n,a)=>{let o=`${e}.${n.replace(`${e}.`,"")}`;if(a===null)t.removeItem(o);else try{let c=s?s(a):a;t.setItem(o,c)}catch(c){console.error(c)}},removeItem:n=>t.removeItem(`${e}.${n}`)}}function er(t){return`[@micro-stacks/client] ${t}`}function j(t,e){xa(t,er(e))}var wi=(t=>(t.ContractCall="contract_call",t.TokenTransfer="token_transfer",t.ContractDeploy="contract_deploy",t))(wi||{}),bi=(t=>(t.Authentication="status/Authentication",t.TransactionSigning="status/TransactionSigning",t.MessageSigning="status/MessageSigning",t.StructuredMessageSigning="status/StructuredMessageSigning",t))(bi||{}),Si=(t=>(t.IsLoading="status/IsLoading",t.IsIdle="status/IsIdle",t))(Si||{}),sr="store",ki=typeof document>"u",Ii=function(t){var e=t.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return e};function Re(t){if(t&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(t)&&!/%[^0-9a-f]/i.test(t)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(t)){var e=[],s="",r="",n="",a="",o="",c="";if(e=Ii(t),s=e[1],r=e[2],n=e[3],a=e[4],o=e[5],!!(s&&s.length&&n.length>=0)){if(r&&r.length){if(!(n.length===0||/^\//.test(n)))return}else if(/^\/\//.test(n))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(s.toLowerCase()))return c+=s+":",r&&r.length&&(c+="//"+r),c+=n,a&&a.length&&(c+="?"+a),o&&o.length&&(c+="#"+o),c}}}var Ei="(?<domain>([^?#]*)) wants you to sign in with your Stacks account:",$i="\\n(?<address>S[A-Z0-9]{40})\\n\\n",Ai="((?<statement>[^\\n]+)\\n)?",rr="(([^:?#]+):)?(([^?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?",Oi=`\\nURI: (?<uri>${rr}?)`,_i="\\nVersion: (?<version>1)",xi="\\nChain ID: (?<chainId>[0-9]+)",Ti="\\nNonce: (?<nonce>[a-zA-Z0-9]{8,})",Me="([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))",Ni=`\\nIssued At: (?<issuedAt>${Me})`,Ci=`(\\nExpiration Time: (?<expirationTime>${Me}))?`,Pi=`(\\nNot Before: (?<notBefore>${Me}))?`,Ri="(\\nRequest ID: (?<requestId>[-._~!$&'()*+,;=:@%a-zA-Z0-9]*))?",Mi=`(\\nResources:(?<resources>(\\n- ${rr}?)+))?`,Ui=`^${Ei}${$i}${Ai}${Oi}${_i}${xi}${Ti}${Ni}${Ci}${Pi}${Ri}${Mi}$`,Di=class{constructor(t){p(this,"domain");p(this,"address");p(this,"statement");p(this,"uri");p(this,"version");p(this,"chainId");p(this,"nonce");p(this,"issuedAt");p(this,"expirationTime");p(this,"notBefore");p(this,"requestId");p(this,"resources");p(this,"match");var e,s,r,n,a,o,c,d,w,f,u,$,S,A;let h=new RegExp(Ui,"g").exec(t);if(!h)throw new Error("Message did not match the regular expression.");if(this.match=h,this.domain=(e=h==null?void 0:h.groups)==null?void 0:e.domain,this.domain.length===0||!/[^#?]*/.test(this.domain))throw new Error("Domain cannot be empty.");if(this.address=(s=h==null?void 0:h.groups)==null?void 0:s.address,!Sn(this.address))throw new Error("Invalid address.");if(this.statement=(r=h==null?void 0:h.groups)==null?void 0:r.statement,this.uri=(n=h==null?void 0:h.groups)==null?void 0:n.uri,!Re(this.uri))throw new Error("Invalid URI.");this.version=(a=h==null?void 0:h.groups)==null?void 0:a.version,this.nonce=(o=h==null?void 0:h.groups)==null?void 0:o.nonce,this.chainId=parseInt((c=h==null?void 0:h.groups)==null?void 0:c.chainId),this.issuedAt=(d=h==null?void 0:h.groups)==null?void 0:d.issuedAt,this.expirationTime=(w=h==null?void 0:h.groups)==null?void 0:w.expirationTime,this.notBefore=(f=h==null?void 0:h.groups)==null?void 0:f.notBefore,this.requestId=(u=h==null?void 0:h.groups)==null?void 0:u.requestId,this.resources=(S=($=h==null?void 0:h.groups)==null?void 0:$.resources)==null?void 0:S.split(`
- `).slice(1),((A=this.resources)==null?void 0:A.length)>0&&this.resources.forEach(k=>{if(!Re(k))throw new Error(`${k} is not a valid resource.`)})}},Fi=["signature","domain","nonce","time"],tt=class{constructor(t,e,s){p(this,"type");p(this,"expected");p(this,"received");this.type=t,this.expected=e,this.received=s}},Li=class{constructor(t){p(this,"domain");p(this,"address");p(this,"statement");p(this,"uri");p(this,"version");p(this,"chainId");p(this,"nonce");p(this,"issuedAt");p(this,"expirationTime");p(this,"notBefore");p(this,"requestId");p(this,"resources");typeof t=="string"&&(t=new Di(t)),this.domain=t.domain,this.address=t.address,this.statement=t.statement,this.uri=t.uri,this.version=t.version,this.nonce=t.nonce,this.issuedAt=t.issuedAt,this.expirationTime=t.expirationTime,this.notBefore=t.notBefore,this.requestId=t.requestId,this.chainId=t.chainId,this.resources=t.resources,typeof this.chainId=="string"&&(this.chainId=parseInt(this.chainId)),this.validateMessage()}toMessage(){this.validateMessage();let t=`${this.domain} wants you to sign in with your Stacks account:`,e=`URI: ${this.uri}`,s=[t,this.address].join(`
`),r=`Version: ${this.version}`,n="Chain ID: "+this.chainId||"1",a=`Nonce: ${this.nonce}`,o=[e,r,n,a];if(this.issuedAt&&Date.parse(this.issuedAt),this.issuedAt=this.issuedAt?this.issuedAt:new Date().toISOString(),o.push(`Issued At: ${this.issuedAt}`),this.expirationTime){let d=`Expiration Time: ${this.expirationTime}`;o.push(d)}this.notBefore&&o.push(`Not Before: ${this.notBefore}`),this.requestId&&o.push(`Request ID: ${this.requestId}`),this.resources&&o.push(["Resources:",...this.resources.map(d=>`- ${d}`)].join(`
`));let c=o.join(`
`);return s=[s,this.statement].join(`

`),this.statement&&(s+=`
`),[s,c].join(`
`)}prepareMessage(){let t;switch(this.version){case"1":{t=this.toMessage();break}default:{t=this.toMessage();break}}return t}async verify(t){return new Promise(async(e,s)=>{Object.keys(t).forEach(u=>{Fi.includes(u)||s({success:!1,data:this,error:new Error(`${u} is not a valid key for VerifyParams.`)})});let r=u=>{s(u)},{signature:n,domain:a,nonce:o,time:c}=t;a&&a!==this.domain&&r({success:!1,data:this,error:new tt("Domain do not match provided domain for verification.",a,this.domain)}),o&&o!==this.nonce&&r({success:!1,data:this,error:new tt("Nonce do not match provided nonce for verification.",o,this.nonce)});let d=new Date(c||new Date);if(this.expirationTime){let u=new Date(this.expirationTime);d.getTime()>=u.getTime()&&r({success:!1,data:this,error:new tt("Expired message.",`${d.toISOString()} < ${u.toISOString()}`,`${d.toISOString()} >= ${u.toISOString()}`)})}if(this.notBefore){let u=new Date(this.notBefore);d.getTime()<u.getTime()&&r({success:!1,data:this,error:new tt("Message is not valid yet.",`${d.toISOString()} >= ${u.toISOString()}`,`${d.toISOString()} < ${u.toISOString()}`)})}let w;try{w=this.prepareMessage()}catch(u){r({success:!1,data:this,error:u});return}let f;try{let u=Fs(w),$=Ks({signature:n}),S=Ls({hash:u,signature:$.signature,recoveryBytes:$.recoveryBytes});ka({signature:n,message:u})&&(f=ks(S,Se(this.address)[0]))}catch{}finally{f!==this.address&&r({success:!1,data:this,error:new tt("Signature do not match address of the message.",f,`Resolved address to be ${this.address}`)})}e({success:!0,data:this})})}validateMessage(...t){var e;if(t.length>0)throw new tt("Unable to parse the message.","Unexpected argument in the validateMessage function.");if(!this.domain||this.domain.length===0||!/[^#?]*/.test(this.domain))throw new tt("Invalid domain.",`${this.domain} to be a valid domain.`);if(!Sn(this.address))throw new tt("Invalid address.",`${this.address} to be a valid address.`);if(!Re(this.uri))throw new tt("URI does not conform to RFC 3986.",`${this.uri} to be a valid uri.`);if(this.version!=="1")throw new tt("Invalid message version.","1",this.version);let s=(e=this==null?void 0:this.nonce)==null?void 0:e.match(/[a-zA-Z0-9]{8,}/);if(!s||this.nonce.length<8||s[0]!==this.nonce)throw new tt("Nonce size smaller then 8 characters or is not alphanumeric.",`Length > 8 (${s==null?void 0:s.length}). Alphanumeric.`,this.nonce);let r=/([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(([Zz])|([+|\-]([01][0-9]|2[0-3]):[0-5][0-9]))/;if(this.issuedAt&&!r.test(this.issuedAt))throw new Error("Invalid time format.");if(this.expirationTime&&!r.test(this.expirationTime))throw new Error("Invalid time format.");if(this.notBefore&&!r.test(this.notBefore))throw new Error("Invalid time format.")}},oe=1;function nr({state:t,version:e}){var s,r,n;return JSON.stringify([[(s=t.network)==null?void 0:s.chainId,(n=(r=t.network)==null?void 0:r.getCoreApiUrl)==null?void 0:n.call(r)],[t.currentAccountIndex,t.accounts.map(a=>({appPrivateKey:a.appPrivateKey,address:$s(a.address[0],As(a.address[1])),profile_url:a.profile_url}))],e])}function Ki(t){let e=JSON.parse(t),[s,r]=e[0],[n,a]=e[1],o=e[2]??oe;return{network:s===re.Mainnet?new Ct({url:r}):new ae({url:r}),currentAccountIndex:n,accounts:a.map(c=>{let[d,w]=Se(c.address);return{appPrivateKey:c.appPrivateKey,address:[d,vt(w)],profile_url:c.profile_url}}),version:o}}var ar=t=>{if(t){if(typeof t!="string")return t;if(t==="testnet")return new ae}return new Ct},Ue=({network:t=new Ct,...e})=>({statuses:{["status/Authentication"]:"status/IsIdle",["status/TransactionSigning"]:"status/IsIdle",["status/MessageSigning"]:"status/IsIdle",["status/StructuredMessageSigning"]:"status/IsIdle"},network:ar(t),appName:e.appName,appIconUrl:e.appIconUrl,accounts:[],currentAccountIndex:0,onPersistState:e.onPersistState,onAuthentication:e.onAuthentication,onNoWalletFound:e.onNoWalletFound,onSignOut:e.onSignOut}),De=(t,e)=>{try{let{version:s,...r}=Ki(t);return{state:{...Ue(e),...r},version:s}}catch{return{state:Ue(e),version:oe}}},ji=()=>{if(!Yt("localStorage",{throwIfUnavailable:!1}))return;let t=localStorage.getItem("MICRO_STACKS_DEBUG");if(t)return JSON.parse(t)},Bi=class{constructor(t={}){p(this,"config");p(this,"storage");p(this,"store");p(this,"debug");p(this,"fetcher");p(this,"getState",()=>this.store.getState());p(this,"onStorageUpdate",t=>{if(typeof document<"u"){let e=window.location.host,s=new URL(t.url).host,r=e===s,n=t.key==="micro-stacks.store";if(r&&n){let a=t.newValue;this.hydrate(JSON.parse(a))}}});p(this,"tabSyncSubscription",t=>{let e=typeof document<"u";return e&&t&&window.addEventListener("storage",this.onStorageUpdate),()=>{e&&t&&window.removeEventListener("storage",this.onStorageUpdate)}});p(this,"onPersistState",t=>{var e,s;return(s=(e=this.store.getState())==null?void 0:e.onPersistState)==null?void 0:s.call(e,t)});p(this,"setOnPersistState",t=>{this.setState(e=>({...e,onPersistState:t})),this.config.onPersistState=t});p(this,"setOnNoWalletFound",t=>{this.setState(e=>({...e,onNoWalletFound:t})),this.config.onPersistState=t});p(this,"setOnSignOut",t=>{this.setState(e=>({...e,onSignOut:t})),this.config.onSignOut=t});p(this,"setOnAuthentication",t=>{this.setState(e=>({...e,onAuthentication:t})),this.config.onAuthentication=t});p(this,"persist",async()=>{if(this.onPersistState){let t=this.dehydrate(this.store.getState());await this.onPersistState(t)}});p(this,"selectHasSession",t=>Boolean(t.accounts.length));p(this,"selectAccounts",t=>t.accounts);p(this,"selectAccount",t=>this.selectHasSession(t)?t.accounts[t.currentAccountIndex]:void 0);p(this,"selectNetwork",t=>this.config.enableNetworkSwitching?t.network:ar(this.config.network));p(this,"selectNetworkChain",t=>this.selectNetwork(t).chainId===re.Mainnet?"mainnet":"testnet");p(this,"selectTestnetStxAddress",t=>{let e=this.selectAccount(t);return e?$s(e.address[0]===Os.mainnetP2SH?Os.testnetP2SH:Os.testnetP2PKH,As(e.address[1])):void 0});p(this,"selectMainnetStxAddress",t=>{let e=this.selectAccount(t);return e?$s(e.address[0],As(e.address[1])):void 0});p(this,"selectStxAddress",t=>this.selectNetworkChain(t)==="mainnet"?this.selectMainnetStxAddress(t):this.selectTestnetStxAddress(t));p(this,"selectAppDetails",t=>t.appName&&t.appIconUrl?{name:t.appName,icon:t.appIconUrl}:void 0);p(this,"selectIdentityAddress",t=>{let e=this.selectAccount(t);return e!=null&&e.appPrivateKey?yn(e.appPrivateKey):void 0});p(this,"selectDecentralizedID",t=>{let e=this.selectIdentityAddress(t);return e?`did:btc-addr:${e}`:void 0});p(this,"selectStatuses",t=>t.statuses);p(this,"statuses",()=>this.selectStatuses(this.getState()));p(this,"isSignMessageRequestPending",()=>this.statuses()["status/MessageSigning"]);p(this,"isSignStructuredMessageRequestPending",()=>this.statuses()["status/StructuredMessageSigning"]);p(this,"authenticate",async t=>{if(!this.handleNoStacksProviderFound())return;let e=this.selectAppDetails(this.getState());j(e,"App details are not defined for you app. Most functionality (authentication, signing requests) require details be passed to the wallet. Add them to your MicroStacksClient config.");let s=this.selectAccounts(this.getState());this.setIsRequestPending("status/Authentication"),await ta({appDetails:e,onFinish:async({profile:r,...n})=>{var a,o;let[c,d]=Se(n.addresses.mainnet),w=[c,vt(d)];s.find(f=>f.address===w)?this.setState(f=>({...f,currentAccountIndex:s.findIndex(u=>u.address===w)})):this.setState(f=>{var u;return{...f,accounts:f.accounts.concat({address:w,appPrivateKey:(u=this.debug)!=null&&u.disableAppPrivateKey?void 0:n.appPrivateKey,decentralizedID:n.decentralizedID,profile_url:n.profile_url}),currentAccountIndex:f.accounts.length}}),(a=t==null?void 0:t.onFinish)==null||a.call(t,n),(o=this.onAuthentication)==null||o.call(this,{profile:r,...n}),await this.persist(),this.setIsIdle("status/Authentication")},onCancel:r=>{var n;this.setIsIdle("status/Authentication"),(n=t==null?void 0:t.onCancel)==null||n.call(t,r)}},Ys)});p(this,"signOut",async t=>{var e,s,r,n;return(r=(s=(e=this.store)==null?void 0:e.persist)==null?void 0:s.clearStorage)==null||r.call(s),(n=this.onSignOut)==null||n.call(this),this.resetState(),t==null?void 0:t()});p(this,"getSignInMessage",({domain:t,nonce:e,version:s="1.0.0"})=>{if(!this.handleNoStacksProviderFound())return;let r=this.getState(),n=this.selectAppDetails(r),a=this.selectStxAddress(r);j(n,"App details are not defined for you app. Most functionality (authentication, signing requests) require details be passed to the wallet. Add them to your MicroStacksClient config."),j(a,"No current Stacks address can be found. This could be because a session has been invalidated, or the user is not signed in.");let o=Yt("document",{throwIfUnavailable:!1})?window.location.origin:"";return new Li({domain:n.name,address:a,statement:"Sign in with Stacks",uri:t??o,version:s,chainId:re.Mainnet,nonce:e})});p(this,"signTransaction",async(t,e)=>{if(!this.handleNoStacksProviderFound())return;let s=this.getState(),r=this.selectAppDetails(s),n=this.selectStxAddress(s),a=this.selectAccount(s),o=this.selectNetwork(s);j(r,"App details are not defined for you app. Most functionality (authentication, signing requests) require details be passed to the wallet. Add them to your MicroStacksClient config."),j(n,"No current Stacks address can be found. This could be because a session has been invalidated, or the user is not signed in."),j(a,"There is not current user session available. Please make sure the user has signed in before attempting this action."),this.setIsRequestPending("status/TransactionSigning");let c,d={privateKey:a.appPrivateKey,appDetails:r,stxAddress:n,network:o,postConditionMode:e.postConditionMode,postConditions:e.postConditions,attachment:e.attachment,sponsored:e.sponsored},w=await(t==="token_transfer"?Jn:t==="contract_call"?Wn:Gn)({...d,...e});return j(w,"Transaction JWT could not be created"),await aa({token:w,onFinish:f=>{var u;c=f,(u=e==null?void 0:e.onFinish)==null||u.call(e,f),this.setIsIdle("status/TransactionSigning")},onCancel:f=>{var u;(u=e==null?void 0:e.onCancel)==null||u.call(e,f),this.setIsIdle("status/TransactionSigning")}}),c});p(this,"signMessage",async t=>{if(!this.handleNoStacksProviderFound())return;let e=this.getState(),s=this.selectAppDetails(e),r=this.selectStxAddress(e),n=this.selectAccount(e),a=this.selectNetwork(e);j(s,"App details are not defined for you app. Most functionality (authentication, signing requests) require details be passed to the wallet. Add them to your MicroStacksClient config."),j(r,"No current Stacks address can be found. This could be because a session has been invalidated, or the user is not signed in."),j(n,"There is not current user session available. Please make sure the user has signed in before attempting this action."),j(t.message,"No message found -- a message is required when requesting a message signature."),this.setIsRequestPending("status/MessageSigning");let o;return await ua({appDetails:s,privateKey:n.appPrivateKey,stxAddress:r,network:a,message:t.message,onFinish:c=>{var d;o=c,(d=t==null?void 0:t.onFinish)==null||d.call(t,c),this.setIsIdle("status/MessageSigning")},onCancel:c=>{var d;(d=t==null?void 0:t.onCancel)==null||d.call(t,c),this.setIsIdle("status/MessageSigning")}}),o});p(this,"signStructuredMessage",async t=>{var e,s,r;if(!this.handleNoStacksProviderFound())return;let n=this.getState(),a=this.selectAppDetails(n),o=this.selectStxAddress(n),c=this.selectAccount(n),d=this.selectNetwork(n);j(a,"App details are not defined for you app. Most functionality (authentication, signing requests) require details be passed to the wallet. Add them to your MicroStacksClient config."),j(o,"No current Stacks address can be found. This could be because a session has been invalidated, or the user is not signed in."),j(c,"There is not current user session available. Please make sure the user has signed in before attempting this action."),j(t.message,"No message found -- a message is required when requesting a message signature."),this.setIsRequestPending("status/StructuredMessageSigning");let w;return await pa({appDetails:a,privateKey:c.appPrivateKey,stxAddress:o,network:d,domain:{name:((e=t.domain)==null?void 0:e.name)??a.name,version:((s=t.domain)==null?void 0:s.version)??"1.0.0",chainId:((r=t.domain)==null?void 0:r.chainId)??d.chainId},message:t.message,onFinish:f=>{var u;w=f,(u=t==null?void 0:t.onFinish)==null||u.call(t,f),this.setIsIdle("status/StructuredMessageSigning")},onCancel:f=>{var u;(u=t==null?void 0:t.onCancel)==null||u.call(t,f),this.setIsIdle("status/StructuredMessageSigning")}}),w});p(this,"setNetwork",t=>{if(!this.config.enableNetworkSwitching)throw new Error(er("Network switching is currently disabled. Set `enableNetworkSwitching` to `true` to enable."));typeof t=="string"?this.setState(e=>({...e,network:t==="mainnet"?new Ct:new ae})):this.setState(e=>({...e,network:t})),this.persist()});p(this,"putFile",(t,e,{encrypt:s=!0,sign:r})=>{let n=this.selectHasSession(this.getState()),a=this.selectGaiaHubConfig(this.getState()),o=this.selectAccount(this.getState());if(!n){console.warn("There is not current user session available. Please make sure the user has signed in before attempting this action.");return}if(!(o!=null&&o.appPrivateKey)||!a){console.warn("The current user session has no `appPrivateKey` defined. Certain actions require an `appPrivateKey`, such as using gaia or encryption.");return}return ii(t,e,{privateKey:o.appPrivateKey,gaiaHubConfig:a,encrypt:s,sign:r,wasString:typeof e=="string"})});p(this,"getFile",(t,{decrypt:e=!0,verify:s})=>{let r=this.selectHasSession(this.getState()),n=this.selectGaiaHubConfig(this.getState()),a=this.selectAccount(this.getState());if(!r){console.warn("There is not current user session available. Please make sure the user has signed in before attempting this action.");return}if(!(a!=null&&a.appPrivateKey)||!n){console.warn("The current user session has no `appPrivateKey` defined. Certain actions require an `appPrivateKey`, such as using gaia or encryption.");return}return mi(t,{privateKey:a.appPrivateKey,gaiaHubConfig:n,decrypt:e,verify:s})});let e={storage:(t==null?void 0:t.storage)??tr,network:(t==null?void 0:t.network)??new Ct,...t},s=typeof e.dehydratedState=="function"?e.dehydratedState(this.storeKey):e.dehydratedState,r=s?De(s,e):{state:Ue(e),version:oe};this.store=Ia($a(Oa(()=>r.state,{name:sr,getStorage:()=>e.storage,version:r.version,serialize:({state:n,version:a})=>nr({state:n,version:a??oe}),deserialize:n=>De(n,e)}))),this.debug=ji(),this.config=e,this.storage=e.storage,this.fetcher=e.fetcher||Qt}setState(t){let e=typeof t=="function"?t(this.store.getState()):t;this.store.setState(e,!0)}resetState(){this.setState(t=>({...t,accounts:[],currentAccountIndex:0}))}get subscribe(){return this.store.subscribe}getStacksProvider(){return Yt("StacksProvider",{throwIfUnavailable:!1})}subscribeToStacksProvider(t,e=100){if(this.getStacksProvider())return t(),()=>{};{let s=setInterval(()=>{this.getStacksProvider()&&(t(),clearInterval(s))},e);return()=>{typeof s<"u"&&clearInterval(s)}}}get storeKey(){return sr}get onAuthentication(){var t;return(t=this.store.getState())==null?void 0:t.onAuthentication}get onNoWalletFound(){var t;return(t=this.store.getState())==null?void 0:t.onNoWalletFound}get onSignOut(){var t;return(t=this.store.getState())==null?void 0:t.onSignOut}dehydrate(t){return nr({state:t??this.store.getState(),version:oe})}hydrate(t){let e=De(t,this.config);this.setState(e.state)}setStatus(t,e){this.setState(s=>({...s,statuses:{...s.statuses,[t]:e}}))}setIsRequestPending(t){this.setStatus(t,"status/IsLoading")}setIsIdle(t){this.setStatus(t,"status/IsIdle")}handleNoStacksProviderFound(){return typeof this.getStacksProvider()>"u"?typeof this.onNoWalletFound<"u"?(this.onNoWalletFound(),!1):(j(this.getStacksProvider(),"The injected `StacksProvider` cannot be found. This is typically because there is no Stacks wallet available, such as the Hiro web wallet extension or the iOS/Android wallet Xverse."),!1):!0}selectGaiaHubConfig(t){let e=this.selectHasSession(t),s=this.selectAccount(t);if(!(!e||!(s!=null&&s.appPrivateKey)))return Qa({gaiaHubUrl:"https://hub.blockstack.org",privateKey:s.appPrivateKey})}async fetchBNSName(){var t;let e=this.selectStxAddress(this.getState()),s=this.selectNetwork(this.getState());if(!e){console.warn("No Stacks address found while trying to fetch BNS name");return}let r=s.getCoreApiUrl()+`/v1/addresses/stacks/${e}`;try{let n=await(await this.fetcher(r)).json();return(t=n==null?void 0:n.names)==null?void 0:t[0]}catch(n){console.log("[@micro-stacks/client] fetchBNSName failed",n)}}async fetchZoneFile(){try{let t=this.selectStxAddress(this.getState()),e=this.selectNetwork(this.getState());if(!t){console.warn("No Stacks address found while trying to fetch zonefile name");return}let s=e.getCoreApiUrl()+`/v1/names/${t}/zonefile`;return await(await this.fetcher(s)).json()}catch(t){console.log("[@micro-stacks/client] fetchZoneFile failed",t)}}async fetchProfile(){let t=this.selectAccount(this.getState());if(t!=null&&t.profile_url)try{return await(await this.fetcher(t.profile_url)).json()}catch(e){console.log("[@micro-stacks/client] fetchProfile failed",e)}}encrypt(t,e={}){var s;if(e!=null&&e.publicKey&&(e!=null&&e.privateKey))throw Error("Error: do not pass both `publicKey` and `privateKey` to client.encrypt");return wn(t,{...e,privateKey:e.privateKey??((s=this.selectAccount(this.getState()))==null?void 0:s.appPrivateKey)})}decrypt(t,e){var s;let r=e.privateKey??((s=this.selectAccount(this.getState()))==null?void 0:s.appPrivateKey);if(!r)throw Error("You must pass a `privateKey` value to client.decrypt");return Is(t,{privateKey:r})}},ir;function zi(t){let e=(t==null?void 0:t.client)??new Bi(t==null?void 0:t.config);return ki?e:(ir=e,ir)}var or="micro-stacks-client-context",cr=({appName:t,appIconUrl:e,storage:s=tr,network:r,dehydratedState:n,onPersistState:a,onSignOut:o,onAuthentication:c,onNoWalletFound:d,fetcher:w})=>{Yi(or,zi({config:{appName:t,appIconUrl:e,storage:s,network:r,dehydratedState:n,onPersistState:a,onSignOut:o,onAuthentication:c,onNoWalletFound:d,fetcher:w}}))},Vi="No MicroStacksClient set, mount the client in your app by wrapping your app in `ClientProvider` or using `mountClient`",lr=()=>{let t=to(or);if(!t)throw new Error(Vi);return t};const ur=eo({}),{console:Hi}=ro,qi="src/routes/+layout.svelte";function Fe(t){let e,s,r,n=t[0],a,o,c;s=new _s({$$inline:!0}),s.$on("network_change",t[2]);let d=Le(t);o=new Ps({$$inline:!0});const w={c:function(){e=g("div"),ls(s.$$.fragment),r=_(),d.c(),a=_(),ls(o.$$.fragment),this.h()},l:function(f){e=m(f,"DIV",{class:!0});var u=b(e);us(s.$$.fragment,u),r=x(u),d.l(u),a=x(u),us(o.$$.fragment,u),u.forEach(y),this.h()},h:function(){i(e,"class","app s-7IPF32Wcq3s8"),v(e,qi,59,0,2068)},m:function(f,u){de(f,e,u),ds(s,e,null),l(e,r),d.m(e,null),l(e,a),ds(o,e,null),c=!0},p:function(f,u){u&1&&le(n,n=f[0])?(pn(),Lt(d,1,1,Xt),ln(),d=Le(f),d.c(),Tt(d,1),d.m(e,a)):d.p(f,u)},i:function(f){c||(Tt(s.$$.fragment,f),Tt(d),Tt(o.$$.fragment,f),c=!0)},o:function(f){Lt(s.$$.fragment,f),Lt(d),Lt(o.$$.fragment,f),c=!1},d:function(f){f&&y(e),hs(s),d.d(f),hs(o)}};return yt("SvelteRegisterBlock",{block:w,id:Fe.name,type:"if",source:"(59:0) {#if inited}",ctx:t}),w}function Le(t){let e;const s=t[4].default,r=so(s,t,t[3],null),n={c:function(){r&&r.c()},l:function(a){r&&r.l(a)},m:function(a,o){r&&r.m(a,o),e=!0},p:function(a,o){r&&r.p&&(!e||o&8)&&no(r,s,a,a[3],e?io(s,a[3],o,null):ao(a[3]),null)},i:function(a){e||(Tt(r,a),e=!0)},o:function(a){Lt(r,a),e=!1},d:function(a){r&&r.d(a)}};return yt("SvelteRegisterBlock",{block:n,id:Le.name,type:"key",source:"(62:2) {#key componentKey}",ctx:t}),n}function Ke(t){let e,s,r=t[1]&&Fe(t);const n={c:function(){r&&r.c(),e=cn()},l:function(a){r&&r.l(a),e=cn()},m:function(a,o){r&&r.m(a,o),de(a,e,o),s=!0},p:function(a,[o]){a[1]?r?(r.p(a,o),o&2&&Tt(r,1)):(r=Fe(a),r.c(),Tt(r,1),r.m(e.parentNode,e)):r&&(pn(),Lt(r,1,1,()=>{r=null}),ln())},i:function(a){s||(Tt(r),s=!0)},o:function(a){Lt(r),s=!1},d:function(a){r&&r.d(a),a&&y(e)}};return yt("SvelteRegisterBlock",{block:n,id:Ke.name,type:"component",source:"",ctx:t}),n}function Zi(t,e,s){let r;en(Nt,"sbtcConfig"),sn(t,Nt,h=>s(7,r=h));let{$$slots:n={},$$scope:a}=e;ye("Layout",n,["default"]);let o=0;const c=Nt.subscribe(h=>{});un(c);const d=()=>{s(0,o++,o)};let w=!1,f={}.VITE_ORIGIN;typeof window<"u"&&(f=window.location.origin);const u={appName:"sBTC Client",appIconUrl:f+"/img/logo.png",network:r.network==="mainnet"?new Ct:new ae};cr(u),ur.set(lr());const $=async()=>{const h=await ve(r.network),k=r;k.sbtcWalletAddress=h,Nt.update(()=>k)};let S;dn(async()=>{S=await Ji(()=>import("../../chunks/bootstrap.esm-9341ea80.js"),[],import.meta.url);try{$()}catch(h){console.log(h)}s(1,w=!0),await hn(),setTimeout(function(){const h=window.document.querySelectorAll('[data-bs-toggle="tooltip"]');h&&[...h].map(O=>new S.Tooltip(O));const k=window.document.querySelectorAll('[data-bs-toggle="dropdown"]');k&&[...k].map(O=>new S.Dropdown(O))},500)});const A=[];return Object.keys(e).forEach(h=>{!~A.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&Hi.warn(`<Layout> was created with unknown prop '${h}'`)}),t.$$set=h=>{"$$scope"in h&&s(3,a=h.$$scope)},t.$capture_state=()=>({tick:hn,onMount:dn,onDestroy:un,Header:_s,Footer:Ps,mountClient:cr,getMicroStacksClient:lr,client:ur,fetchSbtcWalletAddress:ve,sbtcConfig:Nt,StacksTestnet:ae,StacksMainnet:Ct,componentKey:o,unsubscribe:c,networkChange:d,inited:w,origin:f,config:u,fetchWalletAddress:$,bootstrap:S,$sbtcConfig:r}),t.$inject_state=h=>{"componentKey"in h&&s(0,o=h.componentKey),"inited"in h&&s(1,w=h.inited),"origin"in h&&(f=h.origin),"bootstrap"in h&&(S=h.bootstrap)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[o,w,d,a,n]}kn=class extends ge{constructor(e){super(e),me(this,e,Zi,Ke,le,{}),yt("SvelteRegisterComponent",{component:this,tagName:"Layout",options:e,id:Ke.name})}}})();export{Oo as __tla,kn as default};
